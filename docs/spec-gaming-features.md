# MovieIN éŠæˆ²åŒ–åŠŸèƒ½é–‹ç™¼è¦æ ¼

**æ–‡æª”ç‰ˆæœ¬ï¼š** v1.0  
**å»ºç«‹æ—¥æœŸï¼š** 2025-11-12  
**è² è²¬æ¨¡çµ„ï¼š** éŠæˆ²åŒ–ç³»çµ±ï¼ˆæ¯æ—¥å•ç­”ã€ç©åˆ†ã€ç­‰ç´šã€æ’è¡Œæ¦œï¼‰  
**é è¨ˆå·¥æœŸï¼š** 1.5 é€±  
**ç‹€æ…‹ï¼š** å¾…é–‹ç™¼

---

## ğŸ“‹ ç›®éŒ„

1. [åŠŸèƒ½æ¦‚è¦½](#åŠŸèƒ½æ¦‚è¦½)
2. [æ¯æ—¥é›»å½±å•ç­”](#æ¯æ—¥é›»å½±å•ç­”)
3. [ç©åˆ†ç³»çµ±](#ç©åˆ†ç³»çµ±)
4. [ç­‰ç´šç³»çµ±](#ç­‰ç´šç³»çµ±)
5. [æ’è¡Œæ¦œ](#æ’è¡Œæ¦œ)
6. [è³‡æ–™åº«è¨­è¨ˆ](#è³‡æ–™åº«è¨­è¨ˆ)
7. [API è¦æ ¼](#api-è¦æ ¼)
8. [å‰ç«¯çµ„ä»¶](#å‰ç«¯çµ„ä»¶)
9. [é–‹ç™¼æ™‚ç¨‹](#é–‹ç™¼æ™‚ç¨‹)

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¦½

### æ ¸å¿ƒç›®æ¨™
> é€éç°¡å–®æœ‰è¶£çš„æ¯æ—¥å•ç­”ï¼Œæå‡ä½¿ç”¨è€…åƒèˆ‡åº¦ï¼Œä¸¦å»ºç«‹ç­‰ç´šç³»çµ±è®“ç¤¾äº¤äº’å‹•æ›´æœ‰å±¤æ¬¡æ„Ÿã€‚

### è¨­è¨ˆç†å¿µ
- ğŸ® **æ¥µç°¡éŠæˆ²åŒ–**ï¼šåƒ…ä¿ç•™æ ¸å¿ƒæ©Ÿåˆ¶ï¼Œé¿å…è¤‡é›œåŒ–
- â° **æ¯æ—¥ä¸€é¡Œ**ï¼šé™ä½å£“åŠ›ï¼Œé¤Šæˆæ¯æ—¥ç™»å…¥ç¿’æ…£
- ğŸ† **ç­‰ç´šå±•ç¤º**ï¼šç¤¾äº¤åç‰‡ï¼Œæå‡å€‹äººé­…åŠ›
- ğŸ“Š **æ’è¡Œæ¦œ**ï¼šæ¿€å‹µç«¶çˆ­ï¼Œä½†ä¸éåº¦å¼·èª¿

### åŠŸèƒ½æ¶æ§‹
```
éŠæˆ²åŒ–ç³»çµ±
â”œâ”€â”€ æ¯æ—¥å•ç­”
â”‚   â”œâ”€â”€ é¡Œç›®å±•ç¤ºï¼ˆ4 é¸ 1ï¼‰
â”‚   â”œâ”€â”€ å€’æ•¸è¨ˆæ™‚å™¨ï¼ˆ30 ç§’ï¼‰
â”‚   â”œâ”€â”€ ç­”é¡Œåé¥‹ï¼ˆç­”å° +10 åˆ†ï¼‰
â”‚   â””â”€â”€ ç­”æ¡ˆè§£æ
â”‚
â”œâ”€â”€ ç©åˆ†ç³»çµ±
â”‚   â”œâ”€â”€ ä¾†æºï¼šåƒ…æ¯æ—¥å•ç­”ç­”å° +10 åˆ†
â”‚   â”œâ”€â”€ ç©åˆ†ç´¯ç©ï¼ˆç„¡ä¸Šé™ï¼‰
â”‚   â””â”€â”€ ç©åˆ†å±•ç¤ºï¼ˆProfileã€æ’è¡Œæ¦œï¼‰
â”‚
â”œâ”€â”€ ç­‰ç´šç³»çµ±
â”‚   â”œâ”€â”€ 5 å€‹ç­‰ç´šï¼ˆLV.1 ~ LV.5ï¼‰
â”‚   â”œâ”€â”€ ç­‰ç´šç¨±è™Ÿï¼ˆå½±è¿·è¦‹ç¿’ â†’ é›»å½±å®—å¸«ï¼‰
â”‚   â”œâ”€â”€ ç­‰ç´šé¡è‰²æ¨™ç¤º
â”‚   â””â”€â”€ Profile å±•ç¤º
â”‚
â””â”€â”€ æ’è¡Œæ¦œ
    â”œâ”€â”€ å…¨ç«™æ’è¡Œï¼ˆTOP 100ï¼‰
    â”œâ”€â”€ å¥½å‹æ’è¡Œï¼ˆå·²æ¥å—å¥½å‹ï¼‰
    â”œâ”€â”€ æœ¬é€±æ’è¡Œï¼ˆ7 å¤©å…§ç©åˆ†ï¼‰
    â””â”€â”€ æˆ‘çš„æ’åé¡¯ç¤º
```

---

## ğŸ² æ¯æ—¥é›»å½±å•ç­”

### å•ç­”æ©Ÿåˆ¶

#### æ ¸å¿ƒè¦å‰‡
| é …ç›® | è¦æ ¼ |
|------|------|
| **é¡Œç›®é¡å‹** | å–®é¸é¡Œï¼ˆ4 é¸ 1ï¼‰ |
| **æ›´æ–°é »ç‡** | æ¯æ—¥ 00:00 (UTC+8) æ›´æ–°ä¸€é¡Œ |
| **ç­”é¡Œæ™‚é™** | 30 ç§’å€’æ•¸è¨ˆæ™‚ |
| **æ¯æ—¥æ¬¡æ•¸** | åƒ…èƒ½ç­” 1 æ¬¡ï¼ˆç­”å°æˆ–ç­”éŒ¯å¾Œé–å®šï¼‰ |
| **ç­”å°çå‹µ** | +10 ç©åˆ† |
| **ç­”éŒ¯æ‡²ç½°** | ç„¡æ‡²ç½°ï¼ˆ0 åˆ†ï¼‰ |

#### é¡Œç›®çµæ§‹
```typescript
interface DailyQuiz {
  id: number;
  question: string;              // é¡Œç›®
  options: string[];             // é¸é …é™£åˆ—ï¼ˆ4 å€‹ï¼‰
  correct_answer: number;        // æ­£ç¢ºç­”æ¡ˆç´¢å¼•ï¼ˆ0-3ï¼‰
  explanation: string;           // ç­”æ¡ˆè§£æ
  difficulty: 'easy' | 'medium' | 'hard';
  category: string;              // é¡Œç›®åˆ†é¡
  date: Date;                    // é¡Œç›®æ—¥æœŸ
  movie_reference?: {            // é—œè¯é›»å½±ï¼ˆé¸å¡«ï¼‰
    title: string;
    year: number;
    poster_url: string;
  }
}
```

#### é¡Œç›®ç¯„ä¾‹

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¬ æ¯æ—¥é›»å½±å•ç­”                         â”‚
â”‚ 2025-11-12 | é›£åº¦ï¼šâ­â­â­ ä¸­ç­‰         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ ğŸ“½ï¸ é¡Œç›®ï¼š                               â”‚
â”‚ åœ¨é›»å½±ã€Šå…¨é¢å•Ÿå‹•ã€‹ä¸­ï¼Œä¸»è§’æŸ¯å¸ƒæœ€æ·±å±¤  â”‚
â”‚ çš„å¤¢å¢ƒå…±æœ‰å¹¾å±¤ï¼Ÿ                        â”‚
â”‚                                         â”‚
â”‚ â±ï¸ å‰©é¤˜æ™‚é–“ï¼š28 ç§’                      â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚â”‚ A. ä¸‰å±¤                              â”‚â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚â”‚ B. å››å±¤                              â”‚â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚â”‚ C. äº”å±¤                              â”‚â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚â”‚ D. å…­å±¤                              â”‚â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚ ğŸ’¡ æç¤ºï¼šåŒ…å« Limboï¼ˆè¿·å¤±åŸŸï¼‰          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ç­”é¡Œæµç¨‹

#### æµç¨‹åœ–
```
é–‹å•Ÿå•ç­”é 
    â†“
æª¢æŸ¥ä»Šæ—¥æ˜¯å¦å·²ç­”é¡Œ
    â†“ å¦
é¡¯ç¤ºé¡Œç›® + å•Ÿå‹•è¨ˆæ™‚å™¨
    â†“
ä½¿ç”¨è€…é¸æ“‡ç­”æ¡ˆ OR æ™‚é–“åˆ°
    â†“
æäº¤ç­”æ¡ˆ â†’ API é©—è­‰
    â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ç­”å°    â”‚ ç­”éŒ¯    â”‚
â”‚ +10 åˆ†  â”‚ 0 åˆ†    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
    â†“
é¡¯ç¤ºç­”æ¡ˆè§£æ + ç©åˆ†è®ŠåŒ–
    â†“
é–å®šä»Šæ—¥ç­”é¡Œï¼ˆæ˜æ—¥ 00:00 è§£é–ï¼‰
    â†“
[æŸ¥çœ‹æ’è¡Œæ¦œ] [è¿”å›é¦–é ]
```

#### å·²ç­”é¡Œç‹€æ…‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âœ… ä»Šæ—¥å•ç­”å·²å®Œæˆ                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ ğŸ¬ é¡Œç›®ï¼š                                â”‚
â”‚ åœ¨é›»å½±ã€Šå…¨é¢å•Ÿå‹•ã€‹ä¸­ï¼Œä¸»è§’æŸ¯å¸ƒæœ€æ·±å±¤  â”‚
â”‚ çš„å¤¢å¢ƒå…±æœ‰å¹¾å±¤ï¼Ÿ                        â”‚
â”‚                                         â”‚
â”‚ âœ… ä½ çš„ç­”æ¡ˆï¼šB. å››å±¤ï¼ˆæ­£ç¢ºï¼ï¼‰          â”‚
â”‚ ğŸ† ç²å¾—ç©åˆ†ï¼š+10 åˆ†                     â”‚
â”‚                                         â”‚
â”‚ ğŸ’¡ è§£æï¼š                                â”‚
â”‚ é›»å½±ä¸­å…±æœ‰å››å±¤å¤¢å¢ƒï¼š                    â”‚
â”‚ 1. é›¨ä¸­åŸå¸‚                             â”‚
â”‚ 2. é£¯åº—                                 â”‚
â”‚ 3. é›ªå±±å ¡å£˜                             â”‚
â”‚ 4. Limboï¼ˆè¿·å¤±åŸŸï¼‰                      â”‚
â”‚                                         â”‚
â”‚ ğŸ“… æ˜æ—¥å•ç­”å°‡æ–¼ 00:00 æ›´æ–°              â”‚
â”‚                                         â”‚
â”‚ [æŸ¥çœ‹æ’è¡Œæ¦œ] [è¿”å›é¦–é ]                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### ç­”é¡Œåé¥‹è¨­è¨ˆ

#### ç­”å°åé¥‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ‰ ç­”å°äº†ï¼                    â”‚
â”‚                                         â”‚
â”‚          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                  â”‚
â”‚          â”‚  +10 åˆ†   â”‚                  â”‚
â”‚          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                  â”‚
â”‚                                         â”‚
â”‚  ğŸ’š ä½ çš„é›»å½±çŸ¥è­˜çœŸä¸éŒ¯ï¼                â”‚
â”‚                                         â”‚
â”‚  ğŸ“Š ä½ çš„ç¸½ç©åˆ†ï¼š450 â†’ 460              â”‚
â”‚  ğŸ† ç›®å‰æ’åï¼šå…¨ç«™ç¬¬ 234 å            â”‚
â”‚                                         â”‚
â”‚  [æŸ¥çœ‹æ’è¡Œæ¦œ] [è¿”å›é¦–é ]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ç­”éŒ¯åé¥‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          ğŸ’­ ç­”éŒ¯äº†...                   â”‚
â”‚                                         â”‚
â”‚  âŒ ä½ çš„ç­”æ¡ˆï¼šA. ä¸‰å±¤                   â”‚
â”‚  âœ… æ­£ç¢ºç­”æ¡ˆï¼šB. å››å±¤                   â”‚
â”‚                                         â”‚
â”‚  ğŸ’¡ è§£æï¼š                               â”‚
â”‚  é›»å½±ä¸­å…±æœ‰å››å±¤å¤¢å¢ƒï¼ŒåŒ…å«æœ€æ·±å±¤çš„       â”‚
â”‚  Limboï¼ˆè¿·å¤±åŸŸï¼‰ã€‚                      â”‚
â”‚                                         â”‚
â”‚  ğŸ“Š ä½ çš„ç¸½ç©åˆ†ï¼š450 åˆ†ï¼ˆä¸è®Šï¼‰         â”‚
â”‚  ğŸ† ç›®å‰æ’åï¼šå…¨ç«™ç¬¬ 234 å            â”‚
â”‚                                         â”‚
â”‚  ğŸ’ª æ²’é—œä¿‚ï¼Œæ˜å¤©å†ä¾†æŒ‘æˆ°ï¼              â”‚
â”‚                                         â”‚
â”‚  [æŸ¥çœ‹æ’è¡Œæ¦œ] [è¿”å›é¦–é ]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è¶…æ™‚åé¥‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          â° æ™‚é–“åˆ°ï¼                    â”‚
â”‚                                         â”‚
â”‚  å¾ˆå¯æƒœï¼Œ30 ç§’å·²é                      â”‚
â”‚  æœªé¸æ“‡ç­”æ¡ˆè¦–ç‚ºç­”éŒ¯                     â”‚
â”‚                                         â”‚
â”‚  âœ… æ­£ç¢ºç­”æ¡ˆï¼šB. å››å±¤                   â”‚
â”‚                                         â”‚
â”‚  ğŸ’¡ è§£æï¼š                               â”‚
â”‚  é›»å½±ä¸­å…±æœ‰å››å±¤å¤¢å¢ƒ...                  â”‚
â”‚                                         â”‚
â”‚  ğŸ“Š ä½ çš„ç¸½ç©åˆ†ï¼š450 åˆ†ï¼ˆä¸è®Šï¼‰         â”‚
â”‚                                         â”‚
â”‚  âš¡ ä¸‹æ¬¡è¨˜å¾—å¿«ä¸€é»å–”ï¼                  â”‚
â”‚                                         â”‚
â”‚  [æŸ¥çœ‹æ’è¡Œæ¦œ] [è¿”å›é¦–é ]                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### é¡Œåº«ç®¡ç†

#### åˆæœŸé¡Œåº«è¦æ¨¡
- **ç¸½é¡Œæ•¸ï¼š** 30 é¡Œï¼ˆæ»¿è¶³ä¸€å€‹æœˆï¼‰
- **é›£åº¦åˆ†å¸ƒï¼š**
  - ç°¡å–®ï¼ˆâ­ï¼‰ï¼š10 é¡Œ
  - ä¸­ç­‰ï¼ˆâ­â­ï¼‰ï¼š15 é¡Œ
  - å›°é›£ï¼ˆâ­â­â­ï¼‰ï¼š5 é¡Œ

#### é¡Œç›®åˆ†é¡
| åˆ†é¡ | èªªæ˜ | ç¯„ä¾‹é¡Œç›® |
|------|------|---------|
| **é›»å½±æƒ…ç¯€** | åŠ‡æƒ…ç´°ç¯€è€ƒé©— | ã€Šå…¨é¢å•Ÿå‹•ã€‹å…±æœ‰å¹¾å±¤å¤¢å¢ƒï¼Ÿ |
| **æ¼”å“¡é™£å®¹** | æ¼”å“¡è¾¨è­˜ | èª°ä¸»æ¼”ã€Šé»‘æš—é¨å£«ã€‹çš„å°ä¸‘ï¼Ÿ |
| **å°æ¼”ä½œå“** | å°æ¼”é¢¨æ ¼ | ä»¥ä¸‹å“ªéƒ¨ä¸æ˜¯è«¾è˜­çš„ä½œå“ï¼Ÿ |
| **ç¶“å…¸å°è©** | å°è©å‡ºè™• | ã€Œé¡˜åŸåŠ›èˆ‡ä½ åŒåœ¨ã€å‡ºè‡ªï¼Ÿ |
| **é›»å½±å†·çŸ¥è­˜** | å¹•å¾ŒèŠ±çµ® | ã€Šéµé”å°¼è™Ÿã€‹æ‹æ”é ç®—ç‚ºï¼Ÿ |
| **çé …ç´€éŒ„** | å¥§æ–¯å¡ç­‰çé … | ã€Šé­”æˆ’ã€‹ä¸‰éƒ¨æ›²å…±ç²å¹¾åº§å¥§æ–¯å¡ï¼Ÿ |

#### é¡Œç›®è¼ªæ’­æ©Ÿåˆ¶
```sql
-- æ¯æ—¥ 00:00 è‡ªå‹•é¸æ“‡é¡Œç›®
SELECT * FROM daily_quiz 
WHERE date = CURRENT_DATE;

-- å¦‚ç„¡ç•¶æ—¥é¡Œç›®ï¼Œå¾é¡Œåº«éš¨æ©Ÿé¸æ“‡
INSERT INTO daily_quiz (question, options, correct_answer, date, ...)
SELECT question, options, correct_answer, CURRENT_DATE, ...
FROM quiz_pool
WHERE id NOT IN (
    SELECT quiz_id FROM daily_quiz 
    WHERE date > CURRENT_DATE - INTERVAL '30 days'
)
ORDER BY RANDOM()
LIMIT 1;
```

---

## ğŸ’° ç©åˆ†ç³»çµ±

### ç©åˆ†ä¾†æº

#### å”¯ä¸€ä¾†æºï¼šæ¯æ—¥å•ç­”ç­”å°
```
æ¯æ—¥å•ç­”ç­”å° = +10 åˆ†
æ¯æ—¥å•ç­”ç­”éŒ¯ = 0 åˆ†
```

**ç‚ºä½•åªæœ‰ä¸€å€‹ä¾†æºï¼Ÿ**
- âœ… é¿å…åˆ·åˆ†è¡Œç‚ºï¼ˆå¦‚é‡è¤‡è©•åˆ†é›»å½±ï¼‰
- âœ… ç°¡åŒ–ç³»çµ±è¤‡é›œåº¦
- âœ… ç¢ºä¿å…¬å¹³æ€§ï¼ˆæ¯äººæ¯æ—¥ä¸Šé™ 10 åˆ†ï¼‰
- âœ… é™ä½é–‹ç™¼æˆæœ¬

### ç©åˆ†å±•ç¤ºä½ç½®

#### 1. Profile é é¢
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ Victor çš„é›»å½±å®‡å®™                    â”‚
â”‚                                         â”‚
â”‚ ğŸ“Š ç©åˆ†ï¼š2,450 åˆ†                       â”‚
â”‚ ğŸ† ç­‰ç´šï¼šLV.5 é›»å½±å®—å¸«                  â”‚
â”‚ ğŸ“ˆ å…¨ç«™æ’åï¼šç¬¬ 234 å                  â”‚
â”‚ ğŸ‘¥ å¥½å‹ï¼š23 ä½                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. æ’è¡Œæ¦œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ† å…¨ç«™æ’è¡Œæ¦œ                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1. ğŸ¥‡ Alice Lin      3,200 åˆ† | LV.5   â”‚
â”‚ 2. ğŸ¥ˆ Bob Chen       2,950 åˆ† | LV.5   â”‚
â”‚ 3. ğŸ¥‰ Carol Wang     2,680 åˆ† | LV.5   â”‚
â”‚ ...                                     â”‚
â”‚ 234. ä½  Victor Ho    2,450 åˆ† | LV.5   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. äº¤å‹é ï¼ˆæ¨è–¦å¥½å‹ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ David â”‚
â”‚ LV.3     â”‚
â”‚ è§€å½±é”äºº â”‚
â”‚          â”‚
â”‚ ç©åˆ†é”äºº â”‚
â”‚ 800åˆ†    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 4. NavBarï¼ˆä½¿ç”¨è€…é¸å–®ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ Victor Ho        â”‚
â”‚ ğŸ“Š ç©åˆ†ï¼š2,450 åˆ†   â”‚
â”‚ ğŸ† LV.5 é›»å½±å®—å¸«    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ å€‹äººè³‡æ–™            â”‚
â”‚ æ’è¡Œæ¦œ              â”‚
â”‚ æ¯æ—¥å•ç­”            â”‚
â”‚ ç™»å‡º                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ† ç­‰ç´šç³»çµ±

### ç­‰ç´šå®šç¾©

| ç­‰ç´š | ç¨±è™Ÿ | æ‰€éœ€ç©åˆ† | é¡è‰² | åœ–ç¤º |
|------|------|---------|------|------|
| **LV.1** | ğŸ¬ å½±è¿·è¦‹ç¿’ | 0 - 99 åˆ† | ç°è‰² `#9CA3AF` | ğŸ¬ |
| **LV.2** | ğŸï¸ é›»å½±æ„›å¥½è€… | 100 - 299 åˆ† | è—è‰² `#3B82F6` | ğŸï¸ |
| **LV.3** | ğŸ¥ è§€å½±é”äºº | 300 - 599 åˆ† | ç´«è‰² `#8B5CF6` | ğŸ¥ |
| **LV.4** | ğŸ­ å½±è©•å°ˆå®¶ | 600 - 999 åˆ† | é‡‘è‰² `#F59E0B` | ğŸ­ |
| **LV.5** | ğŸ† é›»å½±å®—å¸« | 1,000+ åˆ† | ç´…è‰² `#EF4444` | ğŸ† |

### ç­‰ç´šè¨ˆç®—é‚è¼¯
```typescript
function calculateLevel(totalPoints: number): number {
  if (totalPoints >= 1000) return 5;
  if (totalPoints >= 600) return 4;
  if (totalPoints >= 300) return 3;
  if (totalPoints >= 100) return 2;
  return 1;
}

function getLevelInfo(level: number) {
  const levels = {
    1: { title: 'å½±è¿·è¦‹ç¿’', color: '#9CA3AF', icon: 'ğŸ¬' },
    2: { title: 'é›»å½±æ„›å¥½è€…', color: '#3B82F6', icon: 'ğŸï¸' },
    3: { title: 'è§€å½±é”äºº', color: '#8B5CF6', icon: 'ğŸ¥' },
    4: { title: 'å½±è©•å°ˆå®¶', color: '#F59E0B', icon: 'ğŸ­' },
    5: { title: 'é›»å½±å®—å¸«', color: '#EF4444', icon: 'ğŸ†' }
  };
  return levels[level];
}
```

### ç­‰ç´šå±•ç¤º

#### Profile é é¢ç­‰ç´šå¡ç‰‡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ† LV.5 é›»å½±å®—å¸«                        â”‚
â”‚                                         â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ 100%              â”‚
â”‚ 2,450 / 1,000 åˆ†                        â”‚
â”‚                                         â”‚
â”‚ ğŸ‰ ä½ å·²é”åˆ°æœ€é«˜ç­‰ç´šï¼                   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å‡ç´šä¸­çš„ç­‰ç´šå¡ç‰‡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ¥ LV.3 è§€å½±é”äºº                        â”‚
â”‚                                         â”‚
â”‚ â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘â–‘ 45%               â”‚
â”‚ 450 / 600 åˆ†                            â”‚
â”‚                                         â”‚
â”‚ ğŸ’ª å†ç²å¾— 150 åˆ†å³å¯å‡è‡³ LV.4ï¼         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å‡ç´šå‹•ç•«ï¼ˆç­”é¡Œå¾Œè§¸ç™¼ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                                         â”‚
â”‚         âœ¨ æ­å–œå‡ç´šï¼âœ¨                 â”‚
â”‚                                         â”‚
â”‚      ğŸ¥ LV.3 è§€å½±é”äºº                   â”‚
â”‚           â†“                             â”‚
â”‚      ğŸ­ LV.4 å½±è©•å°ˆå®¶                   â”‚
â”‚                                         â”‚
â”‚  ğŸ‰ ä½ çš„é›»å½±çŸ¥è­˜åˆæ›´ä¸Šä¸€å±¤æ¨“äº†ï¼        â”‚
â”‚                                         â”‚
â”‚  [æŸ¥çœ‹ Profile] [ç¹¼çºŒæ¢ç´¢]              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ç­‰ç´šç‰¹æ¬Šï¼ˆæœªä¾†æ“´å……ï¼‰

**ç›®å‰éšæ®µï¼š** åƒ…ä½œç‚ºå±•ç¤ºï¼Œç„¡å¯¦è³ªç‰¹æ¬Š  
**æœªä¾†å¯èƒ½æ“´å……ï¼š**
- LV.3+ è§£é–é€²éšç¯©é¸å™¨
- LV.4+ å¯ç™¼è¡¨å½±è©•
- LV.5 å°ˆå±¬ç¨±è™Ÿé¡è‰²

---

## ğŸ“Š æ’è¡Œæ¦œ

### æ’è¡Œæ¦œé¡å‹

#### 1. å…¨ç«™æ’è¡Œæ¦œï¼ˆé è¨­ï¼‰
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ† å…¨ç«™æ’è¡Œæ¦œ                           â”‚
â”‚ [å…¨ç«™] [å¥½å‹] [æœ¬é€±]                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ 1. ğŸ¥‡ Alice Lin      3,200 åˆ† | LV.5   â”‚
â”‚    ğŸ¬ æœ€æ„›ï¼šç§‘å¹» / é©šæ‚š                  â”‚
â”‚    ğŸ“… é€£çºŒç­”é¡Œï¼š25 å¤©                    â”‚
â”‚                                         â”‚
â”‚ 2. ğŸ¥ˆ Bob Chen       2,950 åˆ† | LV.5   â”‚
â”‚    ğŸ¬ æœ€æ„›ï¼šå‹•ä½œ / å†’éšª                  â”‚
â”‚    ğŸ“… é€£çºŒç­”é¡Œï¼š18 å¤©                    â”‚
â”‚                                         â”‚
â”‚ 3. ğŸ¥‰ Carol Wang     2,680 åˆ† | LV.5   â”‚
â”‚    ğŸ¬ æœ€æ„›ï¼šåŠ‡æƒ… / æ„›æƒ…                  â”‚
â”‚    ğŸ“… é€£çºŒç­”é¡Œï¼š30 å¤©                    â”‚
â”‚                                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚                                         â”‚
â”‚ 234. ä½  Victor Ho    2,450 åˆ† | LV.5   â”‚
â”‚      ğŸ¬ æœ€æ„›ï¼šç§‘å¹» / æ‡¸ç–‘                â”‚
â”‚      ğŸ“… é€£çºŒç­”é¡Œï¼š12 å¤©                  â”‚
â”‚                                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚                                         â”‚
â”‚ 235. David Lee       2,440 åˆ† | LV.5   â”‚
â”‚ 236. Emma Wu         2,430 åˆ† | LV.5   â”‚
â”‚ ...                                     â”‚
â”‚                                         â”‚
â”‚ [è¼‰å…¥æ›´å¤š]                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2. å¥½å‹æ’è¡Œæ¦œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¥ å¥½å‹æ’è¡Œæ¦œ                           â”‚
â”‚ [å…¨ç«™] [å¥½å‹] [æœ¬é€±]                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ 1. ğŸ¥‡ Alice Lin      3,200 åˆ† | LV.5   â”‚
â”‚    ğŸ’š å“å‘³ç›¸ä¼¼ï¼š72%                      â”‚
â”‚    [å‚³é€è¨Šæ¯]                           â”‚
â”‚                                         â”‚
â”‚ 2. ğŸ¥ˆ Grace Chen     2,680 åˆ† | LV.5   â”‚
â”‚    ğŸ’š å“å‘³ç›¸ä¼¼ï¼š85%                      â”‚
â”‚    [å‚³é€è¨Šæ¯]                           â”‚
â”‚                                         â”‚
â”‚ 3. ä½  Victor Ho      2,450 åˆ† | LV.5   â”‚
â”‚                                         â”‚
â”‚ 4. Henry Wang        1,800 åˆ† | LV.4   â”‚
â”‚    ğŸ’š å“å‘³ç›¸ä¼¼ï¼š60%                      â”‚
â”‚    [å‚³é€è¨Šæ¯]                           â”‚
â”‚                                         â”‚
â”‚ 5. Iris Liu          950 åˆ† | LV.3     â”‚
â”‚    ğŸ’š å“å‘³ç›¸ä¼¼ï¼š55%                      â”‚
â”‚    [å‚³é€è¨Šæ¯]                           â”‚
â”‚                                         â”‚
â”‚ å…± 23 ä½å¥½å‹                            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 3. æœ¬é€±æ’è¡Œæ¦œ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ âš¡ æœ¬é€±æ’è¡Œæ¦œï¼ˆè¿‘ 7 å¤©ï¼‰                â”‚
â”‚ [å…¨ç«™] [å¥½å‹] [æœ¬é€±]                    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ 1. ğŸ¥‡ Alice Lin      70 åˆ† | 7/7 å¤©    â”‚
â”‚    ğŸ”¥ å…¨å‹¤ï¼                             â”‚
â”‚                                         â”‚
â”‚ 2. ğŸ¥ˆ Bob Chen       60 åˆ† | 6/7 å¤©    â”‚
â”‚                                         â”‚
â”‚ 3. ğŸ¥‰ Carol Wang     70 åˆ† | 7/7 å¤©    â”‚
â”‚    ğŸ”¥ å…¨å‹¤ï¼                             â”‚
â”‚                                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚                                         â”‚
â”‚ 45. ä½  Victor Ho     50 åˆ† | 5/7 å¤©    â”‚
â”‚                                         â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€                   â”‚
â”‚                                         â”‚
â”‚ ğŸ’¡ æœ¬é€±é‚„å‰© 2 å¤©ï¼ŒåŠ æ²¹è¡åˆºï¼            â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ’è¡Œæ¦œè³‡è¨Š

#### é¡¯ç¤ºæ¬„ä½
| æ¬„ä½ | èªªæ˜ | è³‡æ–™ä¾†æº |
|------|------|---------|
| æ’å | 1, 2, 3 é¡¯ç¤ºçç‰Œ ğŸ¥‡ğŸ¥ˆğŸ¥‰ | è¨ˆç®— |
| ä½¿ç”¨è€…åç¨± | é¡¯ç¤ºåç¨± | users.display_name |
| ç©åˆ† | ç¸½ç©åˆ† | users.total_points |
| ç­‰ç´š | LV + ç¨±è™Ÿ | users.level |
| æœ€æ„›é¡å‹ | æ¨™ç±¤é¡¯ç¤º | users.favorite_genres |
| é€£çºŒç­”é¡Œå¤©æ•¸ | é€£çºŒç­”å°å¤©æ•¸ | è¨ˆç®— |

#### æˆ‘çš„æ’åå¡ç‰‡
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ“ ä½ çš„æ’å                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ† å…¨ç«™ç¬¬ 234 å / 1,523 äºº             â”‚
â”‚ ğŸ‘¥ å¥½å‹ç¬¬ 3 å / 23 äºº                  â”‚
â”‚ âš¡ æœ¬é€±ç¬¬ 45 å                         â”‚
â”‚                                         â”‚
â”‚ ğŸ“Š æ“Šæ•—äº† 84.6% çš„ä½¿ç”¨è€…                â”‚
â”‚ ğŸ’ª å†ç²å¾— 5 åˆ†å³å¯è¶…è¶Šç¬¬ 233 åï¼       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### æ’è¡Œæ¦œæ›´æ–°æ©Ÿåˆ¶

#### å³æ™‚æ›´æ–°
```typescript
// ä½¿ç”¨è€…ç­”é¡Œå¾Œç«‹å³æ›´æ–°ç©åˆ†å’Œæ’å
async function updateRankings(userId: number, pointsChange: number) {
  // 1. æ›´æ–°ç¸½ç©åˆ†
  await db.users.update({
    where: { id: userId },
    data: { total_points: { increment: pointsChange } }
  });
  
  // 2. é‡æ–°è¨ˆç®—æ’åï¼ˆå¿«å– 5 åˆ†é˜ï¼‰
  await calculateGlobalRankings();
  
  // 3. é‡æ–°è¨ˆç®—å¥½å‹æ’å
  await calculateFriendRankings(userId);
  
  // 4. é‡æ–°è¨ˆç®—æœ¬é€±æ’å
  await calculateWeeklyRankings();
}
```

#### æ’åå¿«å–ç­–ç•¥
- **å…¨ç«™æ’è¡Œæ¦œï¼š** æ¯ 5 åˆ†é˜æ›´æ–°ä¸€æ¬¡
- **å¥½å‹æ’è¡Œæ¦œï¼š** å³æ™‚è¨ˆç®—ï¼ˆæ•¸é‡å°‘ï¼‰
- **æœ¬é€±æ’è¡Œæ¦œï¼š** æ¯ 10 åˆ†é˜æ›´æ–°ä¸€æ¬¡

---

## ğŸ—„ï¸ è³‡æ–™åº«è¨­è¨ˆ

### 1. daily_quizï¼ˆæ¯æ—¥é¡Œç›®è¡¨ï¼‰
```sql
CREATE TABLE daily_quiz (
    id SERIAL PRIMARY KEY,
    date DATE NOT NULL UNIQUE,              -- é¡Œç›®æ—¥æœŸï¼ˆæ¯æ—¥å”¯ä¸€ï¼‰
    question TEXT NOT NULL,                 -- é¡Œç›®å…§å®¹
    options JSONB NOT NULL,                 -- é¸é …é™£åˆ— ["A", "B", "C", "D"]
    correct_answer INTEGER NOT NULL,        -- æ­£ç¢ºç­”æ¡ˆç´¢å¼• (0-3)
    explanation TEXT,                       -- ç­”æ¡ˆè§£æ
    difficulty VARCHAR(20) DEFAULT 'medium', -- é›£åº¦ (easy/medium/hard)
    category VARCHAR(50),                   -- åˆ†é¡
    movie_reference JSONB,                  -- é—œè¯é›»å½±è³‡è¨Šï¼ˆé¸å¡«ï¼‰
    created_at TIMESTAMP DEFAULT NOW(),
    CONSTRAINT valid_answer CHECK (correct_answer BETWEEN 0 AND 3),
    CONSTRAINT valid_difficulty CHECK (difficulty IN ('easy', 'medium', 'hard'))
);

-- ç´¢å¼•
CREATE INDEX idx_daily_quiz_date ON daily_quiz(date DESC);
CREATE INDEX idx_daily_quiz_difficulty ON daily_quiz(difficulty);
```

### 2. quiz_attemptsï¼ˆç­”é¡Œç´€éŒ„è¡¨ï¼‰
```sql
CREATE TABLE quiz_attempts (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    quiz_id INTEGER NOT NULL REFERENCES daily_quiz(id) ON DELETE CASCADE,
    user_answer INTEGER,                    -- ä½¿ç”¨è€…ç­”æ¡ˆç´¢å¼• (0-3, NULL=è¶…æ™‚)
    is_correct BOOLEAN NOT NULL,            -- æ˜¯å¦ç­”å°
    points_earned INTEGER DEFAULT 0,        -- ç²å¾—ç©åˆ†
    time_spent INTEGER,                     -- ç­”é¡Œè€—æ™‚ï¼ˆç§’ï¼‰
    answered_at TIMESTAMP DEFAULT NOW(),
    CONSTRAINT unique_user_quiz UNIQUE(user_id, quiz_id),
    CONSTRAINT valid_user_answer CHECK (user_answer BETWEEN 0 AND 3 OR user_answer IS NULL)
);

-- ç´¢å¼•
CREATE INDEX idx_quiz_attempts_user_id ON quiz_attempts(user_id);
CREATE INDEX idx_quiz_attempts_quiz_id ON quiz_attempts(quiz_id);
CREATE INDEX idx_quiz_attempts_answered_at ON quiz_attempts(answered_at DESC);
CREATE INDEX idx_quiz_attempts_user_correct ON quiz_attempts(user_id, is_correct);
```

### 3. æ“´å…… users è¡¨ï¼ˆç©åˆ†èˆ‡ç­‰ç´šï¼‰
```sql
-- å·²åœ¨ç¤¾äº¤åŠŸèƒ½ Spec ä¸­å®šç¾©ï¼Œæ­¤è™•é‡è¤‡èªªæ˜
ALTER TABLE users ADD COLUMN IF NOT EXISTS total_points INTEGER DEFAULT 0;
ALTER TABLE users ADD COLUMN IF NOT EXISTS level INTEGER DEFAULT 1;

-- ç´¢å¼•ï¼ˆæ’è¡Œæ¦œæŸ¥è©¢å„ªåŒ–ï¼‰
CREATE INDEX idx_users_total_points ON users(total_points DESC);
CREATE INDEX idx_users_level ON users(level);

-- è§¸ç™¼å™¨ï¼šç©åˆ†è®Šæ›´æ™‚è‡ªå‹•æ›´æ–°ç­‰ç´š
CREATE OR REPLACE FUNCTION update_user_level()
RETURNS TRIGGER AS $$
BEGIN
    NEW.level = CASE
        WHEN NEW.total_points >= 1000 THEN 5
        WHEN NEW.total_points >= 600 THEN 4
        WHEN NEW.total_points >= 300 THEN 3
        WHEN NEW.total_points >= 100 THEN 2
        ELSE 1
    END;
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER trigger_update_user_level
BEFORE UPDATE OF total_points ON users
FOR EACH ROW
EXECUTE FUNCTION update_user_level();
```

### 4. quiz_poolï¼ˆé¡Œåº«è¡¨ï¼Œé¸å¡«ï¼‰
```sql
-- ç”¨æ–¼ç®¡ç†é¡Œç›®æ± ï¼Œæœªä¾†å¯å¾æ­¤è¡¨é¸æ“‡é¡Œç›®
CREATE TABLE quiz_pool (
    id SERIAL PRIMARY KEY,
    question TEXT NOT NULL,
    options JSONB NOT NULL,
    correct_answer INTEGER NOT NULL,
    explanation TEXT,
    difficulty VARCHAR(20) DEFAULT 'medium',
    category VARCHAR(50),
    movie_reference JSONB,
    is_active BOOLEAN DEFAULT TRUE,         -- æ˜¯å¦å•Ÿç”¨
    usage_count INTEGER DEFAULT 0,          -- ä½¿ç”¨æ¬¡æ•¸
    created_at TIMESTAMP DEFAULT NOW(),
    updated_at TIMESTAMP DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX idx_quiz_pool_active ON quiz_pool(is_active);
CREATE INDEX idx_quiz_pool_difficulty ON quiz_pool(difficulty);
CREATE INDEX idx_quiz_pool_usage ON quiz_pool(usage_count);
```

---

## ğŸ“¡ API è¦æ ¼

### æ¯æ—¥å•ç­” API

#### 1. å–å¾—ä»Šæ—¥é¡Œç›®
```
GET /api/quiz/today

Response:
{
  "quiz": {
    "id": 123,
    "date": "2025-11-12",
    "question": "åœ¨é›»å½±ã€Šå…¨é¢å•Ÿå‹•ã€‹ä¸­ï¼Œä¸»è§’æŸ¯å¸ƒæœ€æ·±å±¤çš„å¤¢å¢ƒå…±æœ‰å¹¾å±¤ï¼Ÿ",
    "options": ["ä¸‰å±¤", "å››å±¤", "äº”å±¤", "å…­å±¤"],
    "difficulty": "medium",
    "category": "é›»å½±æƒ…ç¯€",
    "movie_reference": {
      "title": "å…¨é¢å•Ÿå‹•",
      "year": 2010,
      "poster_url": "https://..."
    }
  },
  "user_attempt": null,  // å¦‚å·²ç­”é¡Œï¼Œè¿”å›ç­”é¡Œç´€éŒ„
  "has_answered": false,
  "time_until_next": "14:32:18"  // è·é›¢æ˜æ—¥é¡Œç›®çš„æ™‚é–“
}
```

#### 2. æäº¤ç­”æ¡ˆ
```
POST /api/quiz/submit

Body:
{
  "quiz_id": 123,
  "answer": 1,           // é¸é …ç´¢å¼• (0-3)
  "time_spent": 18       // ç­”é¡Œè€—æ™‚ï¼ˆç§’ï¼‰
}

Response:
{
  "is_correct": true,
  "correct_answer": 1,
  "points_earned": 10,
  "explanation": "é›»å½±ä¸­å…±æœ‰å››å±¤å¤¢å¢ƒï¼ŒåŒ…å«æœ€æ·±å±¤çš„ Limbo...",
  "user_stats": {
    "total_points": 460,
    "previous_points": 450,
    "level": 3,
    "previous_level": 3,
    "level_up": false,
    "global_rank": 234,
    "friend_rank": 5
  },
  "movie_reference": {
    "title": "å…¨é¢å•Ÿå‹•",
    "year": 2010,
    "poster_url": "https://..."
  }
}
```

#### 3. å–å¾—ç­”é¡Œæ­·å²
```
GET /api/quiz/history?limit=30

Response:
{
  "attempts": [
    {
      "id": 456,
      "quiz": {
        "date": "2025-11-12",
        "question": "åœ¨é›»å½±ã€Šå…¨é¢å•Ÿå‹•ã€‹ä¸­...",
        "difficulty": "medium"
      },
      "user_answer": 1,
      "is_correct": true,
      "points_earned": 10,
      "time_spent": 18,
      "answered_at": "2025-11-12T10:30:00Z"
    }
  ],
  "stats": {
    "total_attempts": 25,
    "correct_count": 20,
    "accuracy_rate": 80,
    "streak_days": 12  // é€£çºŒç­”é¡Œå¤©æ•¸
  }
}
```

---

### æ’è¡Œæ¦œ API

#### 1. å–å¾—å…¨ç«™æ’è¡Œæ¦œ
```
GET /api/rankings/global?limit=100

Response:
{
  "rankings": [
    {
      "rank": 1,
      "user": {
        "id": 123,
        "display_name": "Alice Lin",
        "avatar_url": "https://...",
        "level": 5,
        "favorite_genres": ["ç§‘å¹»", "é©šæ‚š"],
        "total_points": 3200
      },
      "streak_days": 25
    }
  ],
  "my_rank": {
    "rank": 234,
    "total_users": 1523,
    "percentile": 84.6,
    "points_to_next": 5  // è·é›¢ä¸‹ä¸€åçš„ç©åˆ†å·®
  }
}
```

#### 2. å–å¾—å¥½å‹æ’è¡Œæ¦œ
```
GET /api/rankings/friends

Response:
{
  "rankings": [
    {
      "rank": 1,
      "user": {
        "id": 123,
        "display_name": "Alice Lin",
        "avatar_url": "https://...",
        "level": 5,
        "total_points": 3200
      },
      "similarity_score": 72,  // å“å‘³ç›¸ä¼¼åº¦
      "is_online": true
    }
  ],
  "my_rank": {
    "rank": 3,
    "total_friends": 23
  }
}
```

#### 3. å–å¾—æœ¬é€±æ’è¡Œæ¦œ
```
GET /api/rankings/weekly

Response:
{
  "rankings": [
    {
      "rank": 1,
      "user": {
        "id": 123,
        "display_name": "Alice Lin",
        "avatar_url": "https://...",
        "level": 5
      },
      "weekly_points": 70,
      "answered_days": 7,
      "total_days": 7,
      "is_perfect": true  // å…¨å‹¤
    }
  ],
  "my_rank": {
    "rank": 45,
    "weekly_points": 50,
    "answered_days": 5,
    "remaining_days": 2
  },
  "week_info": {
    "start_date": "2025-11-06",
    "end_date": "2025-11-12",
    "days_remaining": 2
  }
}
```

---

### ä½¿ç”¨è€…çµ±è¨ˆ API

#### 1. å–å¾—å€‹äººçµ±è¨ˆ
```
GET /api/users/{user_id}/stats

Response:
{
  "total_points": 2450,
  "level": 5,
  "level_info": {
    "title": "é›»å½±å®—å¸«",
    "color": "#EF4444",
    "icon": "ğŸ†",
    "min_points": 1000,
    "max_points": null,
    "progress": 1.0  // 100%
  },
  "rankings": {
    "global": 234,
    "friends": 3,
    "weekly": 45
  },
  "quiz_stats": {
    "total_attempts": 25,
    "correct_count": 20,
    "accuracy_rate": 80,
    "streak_days": 12,
    "longest_streak": 18
  },
  "achievements": {
    "first_quiz": true,
    "perfect_week": true,
    "reach_lv5": true
  }
}
```

---

## ğŸ¨ å‰ç«¯çµ„ä»¶

### çµ„ä»¶çµæ§‹
```
frontend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ quiz/
â”‚   â”‚   â””â”€â”€ page.tsx              # æ¯æ—¥å•ç­”é 
â”‚   â”œâ”€â”€ rankings/
â”‚   â”‚   â””â”€â”€ page.tsx              # æ’è¡Œæ¦œé 
â”‚   â””â”€â”€ profile/
â”‚       â””â”€â”€ [userId]/
â”‚           â””â”€â”€ stats/
â”‚               â””â”€â”€ page.tsx      # å€‹äººçµ±è¨ˆé 
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ quiz/
â”‚   â”‚   â”œâ”€â”€ QuizCard.tsx          # é¡Œç›®å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ OptionButton.tsx      # é¸é …æŒ‰éˆ•
â”‚   â”‚   â”œâ”€â”€ Timer.tsx             # å€’æ•¸è¨ˆæ™‚å™¨
â”‚   â”‚   â”œâ”€â”€ AnswerFeedback.tsx    # ç­”é¡Œåé¥‹
â”‚   â”‚   â”œâ”€â”€ QuizHistory.tsx       # ç­”é¡Œæ­·å²
â”‚   â”‚   â””â”€â”€ DifficultyBadge.tsx   # é›£åº¦å¾½ç« 
â”‚   â”œâ”€â”€ home/
â”‚   â”‚   â”œâ”€â”€ HomeQuizWidget.tsx    # é¦–é æ¯æ—¥å•ç­”å…¥å£
â”‚   â”‚   â”œâ”€â”€ QuizCTA.tsx           # è¡Œå‹•æŒ‰éˆ•ï¼ˆç«‹å³ä½œç­”/å‰å¾€è©³æƒ…ï¼‰
â”‚   â”‚   â””â”€â”€ QuizStreakChip.tsx    # é€£çºŒä½œç­”æç¤ºå¾½ç« 
â”‚   â”œâ”€â”€ rankings/
â”‚   â”‚   â”œâ”€â”€ RankingTabs.tsx       # Tab åˆ‡æ›
â”‚   â”‚   â”œâ”€â”€ RankingList.tsx       # æ’è¡Œæ¦œåˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ RankingCard.tsx       # æ’åå¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ MyRankCard.tsx        # æˆ‘çš„æ’åå¡ç‰‡
â”‚   â”‚   â””â”€â”€ WeeklyProgress.tsx    # æœ¬é€±é€²åº¦
â”‚   â”œâ”€â”€ gamification/
â”‚   â”‚   â”œâ”€â”€ LevelBadge.tsx        # ç­‰ç´šå¾½ç« 
â”‚   â”‚   â”œâ”€â”€ LevelProgress.tsx     # ç­‰ç´šé€²åº¦æ¢
â”‚   â”‚   â”œâ”€â”€ PointsAnimation.tsx   # ç©åˆ†å‹•ç•«
â”‚   â”‚   â””â”€â”€ LevelUpModal.tsx      # å‡ç´šå½ˆçª—
â”‚   â””â”€â”€ NavBar.tsx                # å°èˆªåˆ—ï¼ˆé¡¯ç¤ºç©åˆ†ï¼‰
â”‚
â””â”€â”€ lib/
    â”œâ”€â”€ api/
    â”‚   â”œâ”€â”€ quiz.ts               # å•ç­” API
    â”‚   â”œâ”€â”€ rankings.ts           # æ’è¡Œæ¦œ API
    â”‚   â””â”€â”€ stats.ts              # çµ±è¨ˆ API
    â””â”€â”€ hooks/
        â”œâ”€â”€ useQuiz.ts            # å•ç­” Hook
        â”œâ”€â”€ useRankings.ts        # æ’è¡Œæ¦œ Hook
        â”œâ”€â”€ useLevel.ts           # ç­‰ç´š Hook
        â””â”€â”€ useQuizEntry.ts       # é¦–é å•ç­”å…¥å£ Hookï¼ˆæœ€å°åŒ–è³‡æ–™ï¼‰
```

---

### æ ¸å¿ƒ Hooks

#### useQuiz.ts
```typescript
export function useQuiz() {
  const [timeLeft, setTimeLeft] = useState(30);
  const [selectedAnswer, setSelectedAnswer] = useState<number | null>(null);
  const [isSubmitting, setIsSubmitting] = useState(false);

  const { data: todayQuiz, isLoading } = useQuery({
    queryKey: ['quiz', 'today'],
    queryFn: Api.quiz.getToday,
    staleTime: 1000 * 60 * 5  // å¿«å– 5 åˆ†é˜
  });

  const submitAnswer = useMutation({
    mutationFn: (data: { quiz_id: number, answer: number, time_spent: number }) =>
      Api.quiz.submit(data),
    onSuccess: (result) => {
      queryClient.invalidateQueries(['quiz']);
      queryClient.invalidateQueries(['user-stats']);
      
      // å¦‚æœå‡ç´šï¼Œé¡¯ç¤ºå‡ç´šå½ˆçª—
      if (result.user_stats.level_up) {
        showLevelUpModal(result.user_stats);
      }
    }
  });

  useEffect(() => {
    if (!todayQuiz?.has_answered && timeLeft > 0) {
      const timer = setInterval(() => {
        setTimeLeft((prev) => prev - 1);
      }, 1000);
      return () => clearInterval(timer);
    }
    
    // æ™‚é–“åˆ°è‡ªå‹•æäº¤
    if (timeLeft === 0 && !isSubmitting) {
      handleTimeOut();
    }
  }, [timeLeft, todayQuiz, isSubmitting]);

  return {
    todayQuiz: todayQuiz?.quiz,
    hasAnswered: todayQuiz?.has_answered || false,
    userAttempt: todayQuiz?.user_attempt,
    timeLeft,
    selectedAnswer,
    setSelectedAnswer,
    submitAnswer: submitAnswer.mutate,
    isLoading,
    isSubmitting
  };
}
```

#### useRankings.ts
```typescript
export function useRankings(type: 'global' | 'friends' | 'weekly' = 'global') {
  const { data, isLoading } = useQuery({
    queryKey: ['rankings', type],
    queryFn: () => {
      switch (type) {
        case 'global':
          return Api.rankings.getGlobal();
        case 'friends':
          return Api.rankings.getFriends();
        case 'weekly':
          return Api.rankings.getWeekly();
      }
    },
    staleTime: 1000 * 60 * 5  // å¿«å– 5 åˆ†é˜
  });

  return {
    rankings: data?.rankings || [],
    myRank: data?.my_rank,
    isLoading
  };
}
```

#### useLevel.ts
```typescript
export function useLevel(totalPoints: number) {
  const level = useMemo(() => calculateLevel(totalPoints), [totalPoints]);
  const levelInfo = useMemo(() => getLevelInfo(level), [level]);
  
  const nextLevelPoints = useMemo(() => {
    const thresholds = [0, 100, 300, 600, 1000];
    if (level === 5) return null;
    return thresholds[level];
  }, [level]);
  
  const progress = useMemo(() => {
    if (!nextLevelPoints) return 1;
    const currentThreshold = level === 1 ? 0 : [0, 100, 300, 600][level - 1];
    return (totalPoints - currentThreshold) / (nextLevelPoints - currentThreshold);
  }, [totalPoints, level, nextLevelPoints]);

  return {
    level,
    levelInfo,
    nextLevelPoints,
    progress,
    pointsToNext: nextLevelPoints ? nextLevelPoints - totalPoints : 0
  };
}
```

#### useQuizEntry.ts
```typescript
export function useQuizEntry() {
  const { data, isLoading, isFetching } = useQuery({
    queryKey: ['quiz', 'entry'],
    queryFn: Api.quiz.getToday,
    select: (result) => ({
      quizId: result.quiz.id,
      hasAnswered: result.has_answered,
      isCorrect: result.user_attempt?.is_correct ?? null,
      timeLeft: Math.max(0, 30 - (result.user_attempt?.time_spent ?? 0)),
      streakDays: result.user_attempt?.streak_days ?? 0,
      difficulty: result.quiz.difficulty,
      title: result.quiz.question,
      answeredAt: result.user_attempt?.answered_at ?? null
    }),
    staleTime: 1000 * 60 * 2 // é¦–é  widget åªéœ€è¦çŸ­æœŸå¿«å–
  });

  const ctaLabel = useMemo(() => {
    if (!data) return 'è¼‰å…¥ä¸­';
    if (data.hasAnswered) {
      return data.isCorrect ? 'æŸ¥çœ‹è©³è§£' : 'å†æ¥å†å²';
    }
    return 'ç«‹å³ä½œç­”';
  }, [data]);

  return {
    entryData: data,
    ctaLabel,
    isLoading,
    isFetching,
    isDisabled: !data || data.hasAnswered
  };
}
```

---

## ğŸ  é¦–é éŠæˆ²å•ç­”å…¥å£

### ç‰ˆä½é…ç½®
- ä½ç½®ï¼šé¦–é  Hero å€åŸŸå³åŠï¼ˆæ¡Œæ©Ÿï¼‰ï¼é¦–å±ç¬¬ 1 å€‹å¡ç‰‡ï¼ˆæ‰‹æ©Ÿï¼‰ï¼Œç¢ºä¿ä½¿ç”¨è€…é–‹å•Ÿ App å³å¯çœ‹åˆ°ä»Šæ—¥é¡Œç›®æ‘˜è¦ã€‚
- é»æ“Šæ•´å€‹ `HomeQuizWidget` æˆ–ä¸»è¦ CTA çš†æœƒå°å‘ `/quiz` è©³ç´°é ï¼Œä¸¦æ–¼å°å‘å‰å…ˆä¸Šå ± `home_quiz_entry_click` äº‹ä»¶ã€‚
- å…§å®¹çµæ§‹ï¼šé¡Œç›®æ¨™é¡Œï¼ˆæœ€å¤š 2 è¡Œï¼‰ã€å€’æ•¸æŒ‡ç¤ºï¼ˆé€²åº¦æ¢ + ç§’æ•¸ï¼‰ã€ `QuizStreakChip`ï¼ˆå±•ç¤ºé€£çºŒç­”é¡Œå¤©æ•¸ï¼‰ã€å³æ™‚ç©åˆ† / ç­‰ç´šæç¤ºã€‚
- èƒŒæ™¯åœ–ä¾é¡Œç›®é›»å½±é¡åˆ¥è®ŠåŒ–ï¼ˆä½¿ç”¨ DifficultyBadge paletteï¼‰ï¼Œæœªä½œç­”ç‹€æ…‹ä½¿ç”¨å‹•æ…‹é«˜äº®ï¼Œå…¶ä»–ç‹€æ…‹é™ä½é£½å’Œåº¦ã€‚

### ç‹€æ…‹å®šç¾©
| ç‹€æ…‹ | è§¸ç™¼æ¢ä»¶ | UI / æ–‡æ¡ˆ | CTA |
|------|----------|-----------|-----|
| æœªä½œç­”ï¼ˆé è¨­ï¼‰ | `has_answered = false` ä¸”ä»Šæ—¥é¡Œç›®å·²ä¸Šç·š | é¡¯ç¤ºé¡Œç›®æ¨™é¡Œ + å€’æ•¸ 30s â†’ 0sï¼ŒCTAã€Œç«‹å³ä½œç­”ã€ | å‰å¾€ `/quiz` ä¸¦å¸¶å…¥ `quizId` |
| å·²ä½œç­”-ç­”å° | `has_answered = true && is_correct = true` | é¡¯ç¤º âœ… æ¨™è¨˜ã€ç²å¾— +10 ç©åˆ†ã€ç­‰ç´šé€²åº¦æ¢è£œå…‰ | CTAã€ŒæŸ¥çœ‹è©³è§£ã€ï¼Œå°å‘é¡Œç›®è©³è§£å€å¡Š |
| å·²ä½œç­”-ç­”éŒ¯ / è¶…æ™‚ | `has_answered = true && !is_correct` | é¡¯ç¤º âŒ èˆ‡æç¤ºæ–‡æ¡ˆã€Œæ˜æ—¥å†æ¥å†å²ã€ä¸¦é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆæ‘˜è¦ | CTAã€ŒæŸ¥çœ‹è©³è§£ã€ |
| é¡Œç›®æœªä¸Šæ¶ | å¾Œç«¯æœªæä¾›ä»Šæ—¥é¡Œç›®ï¼ˆä¾‹å¦‚ 00:00 å‰å¾Œå¿«å–ï¼‰ | é¡¯ç¤ºéª¨æ¶è¼‰å…¥ + ã€Œé¡Œç›®æº–å‚™ä¸­ã€ | CTA disabled |
| é¡åº¦ç”¨ç½„ / è¢«å°é– | `has_answered = true` ä¸” `daily_limit_reached = true` æˆ–å°é– | é¡¯ç¤ºç°éšç‹€æ…‹èˆ‡å®¢æœèªªæ˜ | CTAã€Œäº†è§£é™åˆ¶ã€â†’ FAQ |

### äº’å‹•æµç¨‹
1. Widget è¼‰å…¥å‘¼å« `useQuizEntry`ï¼Œè‹¥ 500ms å…§æœªå›æ‡‰é¡¯ç¤º skeletonã€‚
2. ä½¿ç”¨è€…é»æ“Š CTA â†’ è§¸ç™¼ `home_quiz_entry_click` åˆ†æäº‹ä»¶ â†’ é–‹å•Ÿ `/quiz?from=home`ã€‚
3. è‹¥å€’æ•¸è‡ªå‹•æ­¸é›¶è€Œä½¿ç”¨è€…ä»åœåœ¨é¦–é ï¼Œå‘ˆç¾ã€Œå€’æ•¸çµæŸã€å‹•ç•«ä¸¦é–å®š CTAï¼ˆéœ€é€²è©³ç´°é æ‰èƒ½é€å‡ºç­”æ¡ˆï¼‰ã€‚
4. å®Œæˆä½œç­”è¿”å›é¦–é æ™‚ï¼ŒWidget éœ€ç«‹å³åæ˜ æœ€æ–°ç‹€æ…‹ï¼ˆä¾è³´ React Query å¿«å– + `queryClient.invalidateQueries(['quiz'])`ï¼‰ã€‚

### è³‡æ–™ä¾è³´
- `GET /api/quiz/today`ï¼šæä¾›é¡Œç›®æ¨™é¡Œã€é›£åº¦ã€æ˜¯å¦ä½œç­”ã€ä½¿ç”¨è€…ä½œç­”çµæœç­‰ï¼ˆæ²¿ç”¨å•ç­” APIï¼‰ã€‚
- `GET /api/user/stats`ï¼šå–å¾—ç•¶å‰ç©åˆ†èˆ‡ç­‰ç´šï¼Œç”¨æ–¼é¡¯ç¤ºé€²åº¦æ¢ï¼ˆå¯å»¶é²è¼‰å…¥ï¼Œå„ªå…ˆé¡¯ç¤ºå•ç­”è³‡æ–™ï¼‰ã€‚
- äº‹ä»¶è¿½è¹¤ï¼š`home_quiz_widget_impression`ã€`home_quiz_entry_click`ã€`home_quiz_cta_disabled`ï¼ˆç›£æ¸¬é™åˆ¶ç‹€æ…‹ï¼‰ã€‚

### éŸ¿æ‡‰å¼èˆ‡ç„¡éšœç¤™
- æ¡Œæ©Ÿï¼šWidget å¯¬ 420pxï¼Œå€’æ•¸æ¢ç½®é ‚ï¼›æ‰‹æ©Ÿï¼šæ»¿ç‰ˆå¡ç‰‡ï¼ˆå…§è· 16pxï¼‰ï¼Œå€’æ•¸æ”¹ç‚ºåœ“å½¢è¨ˆæ™‚å™¨æ¸›å°‘ä½”ä½ã€‚
- å…ƒä»¶ä½¿ç”¨ `aria-live="polite"` è®€å‡ºå€’æ•¸è®ŠåŒ–ï¼›CTA éœ€æä¾› `aria-disabled` ç‹€æ…‹èˆ‡è¼”åŠ©æ–‡æ¡ˆã€‚
- é€£çºŒä½œç­”å¾½ç« æä¾› tooltipï¼šã€Œå·²é€£çºŒç­”é¡Œ X å¤©ï¼Œå† 3 å¤©å¯å¾—å¾½ç« ã€ã€‚

### è¿½è¹¤æŒ‡æ¨™
- é¦–é  Widget é»æ“Šç‡ï¼ˆCTRï¼‰ = `home_quiz_entry_click / home_quiz_widget_impression`
- é¦–é å°æµç­”é¡Œè½‰æ›ç‡ = `home_quiz_start / home_quiz_entry_click`
- é€£çºŒä½œç­”å•Ÿå‹•ç‡ = `streak_started_from_home / total_home_entries`
- éŒ¯èª¤ / é™åˆ¶è§¸ç™¼æ¬¡æ•¸ = `home_quiz_cta_disabled`ï¼Œç”¨æ–¼ç›£æ¸¬å°é–æˆ–å°šæœªä¸Šæ¶çš„é »ç‡ã€‚

---

## ğŸ“… é–‹ç™¼æ™‚ç¨‹

### Week 3: éŠæˆ²åŒ–åŠŸèƒ½ï¼ˆ1.5 é€±ï¼‰

#### Day 1-2: è³‡æ–™åº«è¨­è¨ˆèˆ‡é¡Œåº«æº–å‚™
- [ ] **è³‡æ–™åº«è¨­è¨ˆ**
  - [ ] å»ºç«‹ daily_quiz è¡¨
  - [ ] å»ºç«‹ quiz_attempts è¡¨
  - [ ] å»ºç«‹ quiz_pool è¡¨ï¼ˆé¸å¡«ï¼‰
  - [ ] users è¡¨ç©åˆ†èˆ‡ç­‰ç´šæ¬„ä½
  - [ ] å»ºç«‹ç­‰ç´šæ›´æ–°è§¸ç™¼å™¨
  
- [ ] **é¡Œåº«æº–å‚™**
  - [ ] æº–å‚™ 30 é¡Œåˆå§‹é¡Œç›®
  - [ ] é¡Œç›®åˆ†é¡èˆ‡é›£åº¦æ¨™è¨»
  - [ ] å»ºç«‹é¡Œç›®è¼ªæ’­æ©Ÿåˆ¶

#### Day 3-5: æ¯æ—¥å•ç­” API èˆ‡ UI
- [ ] **å¾Œç«¯ API**
  - [ ] å–å¾—ä»Šæ—¥é¡Œç›® API
  - [ ] æäº¤ç­”æ¡ˆ API
  - [ ] ç©åˆ†è¨ˆç®—é‚è¼¯
  - [ ] ç­‰ç´šè‡ªå‹•æ›´æ–°
  - [ ] ç­”é¡Œæ­·å² API
  
- [ ] **å‰ç«¯ UI**
  - [ ] å•ç­”é é¢ä½ˆå±€
  - [ ] é¡Œç›®å¡ç‰‡çµ„ä»¶
  - [ ] é¸é …æŒ‰éˆ•çµ„ä»¶
  - [ ] å€’æ•¸è¨ˆæ™‚å™¨
  - [ ] ç­”é¡Œåé¥‹ï¼ˆç­”å°/ç­”éŒ¯/è¶…æ™‚ï¼‰
  - [ ] ç­”æ¡ˆè§£æå±•ç¤º

#### Day 6-8: æ’è¡Œæ¦œèˆ‡ç­‰ç´šç³»çµ±
- [ ] **æ’è¡Œæ¦œ API**
  - [ ] å…¨ç«™æ’è¡Œæ¦œ API
  - [ ] å¥½å‹æ’è¡Œæ¦œ API
  - [ ] æœ¬é€±æ’è¡Œæ¦œ API
  - [ ] æ’åå¿«å–æ©Ÿåˆ¶
  
- [ ] **æ’è¡Œæ¦œ UI**
  - [ ] æ’è¡Œæ¦œé é¢
  - [ ] ä¸‰ Tab åˆ‡æ›
  - [ ] æ’åå¡ç‰‡çµ„ä»¶
  - [ ] æˆ‘çš„æ’åå¡ç‰‡
  - [ ] æœ¬é€±é€²åº¦é¡¯ç¤º
  
- [ ] **ç­‰ç´šç³»çµ± UI**
  - [ ] ç­‰ç´šå¾½ç« çµ„ä»¶
  - [ ] ç­‰ç´šé€²åº¦æ¢
  - [ ] å‡ç´šå½ˆçª—å‹•ç•«
  - [ ] Profile é ç­‰ç´šå±•ç¤º

#### Day 9-10: æ•´åˆèˆ‡å„ªåŒ–
- [ ] **é¦–é å•ç­”å…¥å£**
  - [ ] å¯¦ä½œ HomeQuizWidgetï¼ˆå« Skeletonï¼‰
  - [ ] ä¸²æ¥ `useQuizEntry` / React Query å¿«å–
  - [ ] CTA äº‹ä»¶è¿½è¹¤ï¼ˆimpression / click / disabledï¼‰
  - [ ] éŸ¿æ‡‰å¼èˆ‡ç„¡éšœç¤™èª¿æ•´
  
- [ ] **NavBar æ•´åˆ**
  - [ ] é¡¯ç¤ºä½¿ç”¨è€…ç©åˆ†èˆ‡ç­‰ç´š
  - [ ] å¿«é€Ÿè·³è½‰æ¯æ—¥å•ç­”
  - [ ] å¿«é€ŸæŸ¥çœ‹æ’è¡Œæ¦œ
  
- [ ] **æ•¸æ“šçµ±è¨ˆ**
  - [ ] å€‹äººçµ±è¨ˆé é¢
  - [ ] ç­”é¡Œæº–ç¢ºç‡
  - [ ] é€£çºŒç­”é¡Œå¤©æ•¸
  - [ ] æˆå°±ç³»çµ±ï¼ˆé¸å¡«ï¼‰
  
- [ ] **æ¸¬è©¦èˆ‡å„ªåŒ–**
  - [ ] ç­”é¡Œæµç¨‹æ¸¬è©¦
  - [ ] ç©åˆ†è¨ˆç®—æ­£ç¢ºæ€§
  - [ ] æ’è¡Œæ¦œæ›´æ–°å³æ™‚æ€§
  - [ ] ç­‰ç´šå‡ç´šè§¸ç™¼æ¸¬è©¦

---

## ğŸ“ é–‹ç™¼æ³¨æ„äº‹é …

### è³‡æ–™ä¸€è‡´æ€§
- ç­”é¡Œå¾Œç«‹å³æ›´æ–°ç©åˆ†èˆ‡ç­‰ç´š
- æ’è¡Œæ¦œä½¿ç”¨å¿«å–é¿å…éåº¦è¨ˆç®—
- æ¯æ—¥é¡Œç›®åœ¨ 00:00 (UTC+8) æº–æ™‚æ›´æ–°
- é˜²æ­¢é‡è¤‡ç­”é¡Œï¼ˆè³‡æ–™åº«å”¯ä¸€ç´„æŸï¼‰

### æ•ˆèƒ½å„ªåŒ–
- æ’è¡Œæ¦œæŸ¥è©¢å„ªåŒ–ï¼ˆç´¢å¼•ã€å¿«å–ï¼‰
- é¡Œç›®é è¼‰ï¼ˆæå‰ç”Ÿæˆæ˜æ—¥é¡Œç›®ï¼‰
- ç­‰ç´šè¨ˆç®—ä½¿ç”¨è³‡æ–™åº«è§¸ç™¼å™¨
- ç­”é¡Œæ­·å²åˆ†é è¼‰å…¥

### å®‰å…¨æ€§
- ç­”æ¡ˆé©—è­‰åœ¨å¾Œç«¯é€²è¡Œï¼ˆå‰ç«¯ä¸é¡¯ç¤ºæ­£ç¢ºç­”æ¡ˆï¼‰
- é˜²æ­¢ä½œå¼Šï¼ˆå€’æ•¸è¨ˆæ™‚å™¨åœ¨å¾Œç«¯é©—è­‰ï¼‰
- ç©åˆ†è®Šæ›´è¨˜éŒ„å¯©è¨ˆ
- SQL Injection é˜²è­·

### ä½¿ç”¨è€…é«”é©—
- ç­”é¡Œå¾Œç«‹å³é¡¯ç¤ºåé¥‹
- å‡ç´šæ™‚å½ˆçª—æ…¶ç¥å‹•ç•«
- æ’è¡Œæ¦œè¼‰å…¥æ™‚é¡¯ç¤ºéª¨æ¶å±
- å€’æ•¸è¨ˆæ™‚å™¨è¦–è¦ºåŒ–ï¼ˆé€²åº¦æ¢ï¼‰
- ç©ºç‹€æ…‹è¨­è¨ˆï¼ˆç„¡ç­”é¡Œæ­·å²ç­‰ï¼‰

### æ“´å±•æ€§è€ƒé‡
- é¡Œåº«è¡¨è¨­è¨ˆæ”¯æ´æœªä¾†æ“´å……
- æˆå°±ç³»çµ±é ç•™æ¬„ä½
- å…¶ä»–ç©åˆ†ä¾†æºå¯å¿«é€Ÿæ–°å¢
- æ’è¡Œæ¦œé¡å‹å¯å½ˆæ€§æ“´å……

---

## ğŸ”® æœªä¾†æ“´å……æ–¹å‘

### éšæ®µäºŒï¼šå„ªåŒ–èˆ‡æ“´å……
- [ ] **é¡Œç›®å¤šæ¨£åŒ–**
  - [ ] åœ–ç‰‡é¡Œï¼ˆé›»å½±æµ·å ±è¾¨è­˜ï¼‰
  - [ ] éŸ³è¨Šé¡Œï¼ˆé…æ¨‚è¾¨è­˜ï¼‰
  - [ ] å½±ç‰‡é¡Œï¼ˆç¶“å…¸ç‰‡æ®µï¼‰
  
- [ ] **æˆå°±ç³»çµ±**
  - [ ] é¦–æ¬¡ç­”é¡Œ
  - [ ] é€£çºŒ 7 å¤©ç­”é¡Œ
  - [ ] å…¨å‹¤ä¸€å€‹æœˆ
  - [ ] é”åˆ° LV.5
  
- [ ] **ç¤¾äº¤äº’å‹•**
  - [ ] æŒ‘æˆ°å¥½å‹ï¼ˆPK æ¨¡å¼ï¼‰
  - [ ] åˆ†äº«ç­”é¡Œæˆæœ
  - [ ] é¡Œç›®è¨è«–å€

### éšæ®µä¸‰ï¼šé€²éšåŠŸèƒ½
- [ ] **å€‹äººåŒ–æ¨è–¦**
  - [ ] æ ¹æ“šæœ€æ„›é¡å‹æ¨è–¦é¡Œç›®
  - [ ] é›£åº¦è‡ªå‹•èª¿æ•´
  
- [ ] **æ›´å¤šç©åˆ†ä¾†æº**
  - [ ] å®Œæ•´è§€å½±è©•åˆ†ï¼ˆé¦–æ¬¡ +5 åˆ†ï¼‰
  - [ ] æ’°å¯«å½±è©•ï¼ˆ+10 åˆ†ï¼‰
  - [ ] æ¨è–¦é›»å½±è¢«æ¡ç´ï¼ˆ+20 åˆ†ï¼‰

---

**æ–‡æª”çµæŸ**

å¦‚æœ‰ç–‘å•è«‹åƒè€ƒï¼š
- ç¤¾äº¤åŠŸèƒ½è¦æ ¼ï¼š`docs/spec-social-features.md`
- æ•´é«”è¦åŠƒæ–‡æª”ï¼š`docs/social-gaming-expansion-plan.md`
