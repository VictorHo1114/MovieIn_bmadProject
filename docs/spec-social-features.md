# MovieIN ç¤¾äº¤åŠŸèƒ½é–‹ç™¼è¦æ ¼

**æ–‡æª”ç‰ˆæœ¬ï¼š** v1.0  
**å»ºç«‹æ—¥æœŸï¼š** 2025-11-12  
**è² è²¬æ¨¡çµ„ï¼š** ç¤¾äº¤ç³»çµ±ï¼ˆå¥½å‹ã€äº¤å‹ã€ç§è¨Šï¼‰  
**é è¨ˆå·¥æœŸï¼š** 4.5 é€±  
**ç‹€æ…‹ï¼š** å¾…é–‹ç™¼

---

## ğŸ“‹ ç›®éŒ„

1. [åŠŸèƒ½æ¦‚è¦½](#åŠŸèƒ½æ¦‚è¦½)
2. [äº¤å‹é é¢](#äº¤å‹é é¢)
3. [Profile æ“´å……](#profile-æ“´å……)
4. [å¥½å‹ç³»çµ±](#å¥½å‹ç³»çµ±)
5. [ç§è¨ŠåŠŸèƒ½](#ç§è¨ŠåŠŸèƒ½)
6. [è³‡æ–™åº«è¨­è¨ˆ](#è³‡æ–™åº«è¨­è¨ˆ)
7. [API è¦æ ¼](#api-è¦æ ¼)
8. [å‰ç«¯çµ„ä»¶](#å‰ç«¯çµ„ä»¶)
9. [é–‹ç™¼æ™‚ç¨‹](#é–‹ç™¼æ™‚ç¨‹)

---

## ğŸ¯ åŠŸèƒ½æ¦‚è¦½

### æ ¸å¿ƒç›®æ¨™
> æ‰“é€ ä»¥ã€Œé›»å½±å“å‘³é…å°ã€ç‚ºæ ¸å¿ƒçš„è¼•ç¤¾äº¤å¹³å°ï¼Œè®“ä½¿ç”¨è€…èƒ½å¤ æ‰¾åˆ°å“å‘³ç›¸ä¼¼çš„å½±è¿·æœ‹å‹ï¼Œä¸¦é€éç§è¨Šæ·±åº¦äº¤æµã€‚

### è¨­è¨ˆç†å¿µ
- ğŸŒ **å…¨å…¬é–‹è³‡è¨Š**ï¼šé™ä½ç¤¾äº¤é–€æª»ï¼Œé¡ä¼¼äº¤å‹è»Ÿé«”é‚è¼¯
- ğŸ¯ **é›†ä¸­å¼ç®¡ç†**ï¼šæ‰€æœ‰ç¤¾äº¤æ“ä½œé›†ä¸­åœ¨ã€Œäº¤å‹é ã€
- ğŸ’¬ **å¥½å‹é™å®šç§è¨Š**ï¼šæˆç‚ºå¥½å‹å¾Œè§£é–æ·±åº¦äº’å‹•
- ğŸ“Š **å“å‘³é…å°**ï¼šåŸºæ–¼ Top 10 ç‰‡å–®çš„ç›¸ä¼¼åº¦æ¨è–¦

### åŠŸèƒ½æ¶æ§‹
```
ç¤¾äº¤ç³»çµ±
â”œâ”€â”€ äº¤å‹é ï¼ˆæ ¸å¿ƒå…¥å£ï¼‰
â”‚   â”œâ”€â”€ å¥½å‹é‚€è«‹ Tabï¼ˆå¾…è™•ç†é‚€è«‹ï¼‰
â”‚   â”œâ”€â”€ æ¨è–¦å¥½å‹ Tabï¼ˆå¹³å°æ¨è–¦ï¼‰
â”‚   â””â”€â”€ æˆ‘çš„å¥½å‹ Tabï¼ˆå·²æ¥å—å¥½å‹ï¼‰
â”‚
â”œâ”€â”€ Profile æ“´å……
â”‚   â”œâ”€â”€ å€‹äººè³‡è¨Šï¼ˆç°¡ä»‹ã€é¡å‹ã€ç¿’æ…£ï¼‰
â”‚   â”œâ”€â”€ ç©åˆ†èˆ‡ç­‰ç´šé¡¯ç¤º
â”‚   â””â”€â”€ å¥½å‹æ•¸é‡çµ±è¨ˆ
â”‚
â”œâ”€â”€ å¥½å‹ç³»çµ±
â”‚   â”œâ”€â”€ ç™¼é€/æ¥å—/å¿½ç•¥é‚€è«‹
â”‚   â”œâ”€â”€ å¥½å‹åˆ—è¡¨ç®¡ç†
â”‚   â””â”€â”€ å°é–åŠŸèƒ½
â”‚
â””â”€â”€ ç§è¨ŠåŠŸèƒ½
    â”œâ”€â”€ ä¸€å°ä¸€æ–‡å­—è¨Šæ¯
    â”œâ”€â”€ å·²è®€/æœªè®€ç‹€æ…‹
    â””â”€â”€ è¨Šæ¯é€šçŸ¥
```

---

## ğŸ“± äº¤å‹é é¢

### æ•´é«”æ¶æ§‹

#### é é¢ä½ˆå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¥ äº¤å‹                                 â”‚
â”‚ [å¥½å‹é‚€è«‹ (3)] [æ¨è–¦å¥½å‹] [æˆ‘çš„å¥½å‹ (23)]â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ [Tab å…§å®¹å€]                            â”‚
â”‚                                         â”‚
â”‚ â€¢ å¥½å‹é‚€è«‹ï¼šé¡¯ç¤ºå¾…è™•ç†çš„é‚€è«‹å¡ç‰‡        â”‚
â”‚ â€¢ æ¨è–¦å¥½å‹ï¼šé¡¯ç¤ºå¹³å°æ¨è–¦çš„ä½¿ç”¨è€…å¡ç‰‡    â”‚
â”‚ â€¢ æˆ‘çš„å¥½å‹ï¼šé¡¯ç¤ºå·²æ¥å—çš„å¥½å‹åˆ—è¡¨        â”‚
â”‚                                         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Tab 1: å¥½å‹é‚€è«‹

#### UI è¨­è¨ˆ
```
ğŸ”” å¥½å‹é‚€è«‹ (3 å€‹å¾…è™•ç†)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ Alice Lin                        â”‚
â”‚ LV.3 è§€å½±é”äºº | å“å‘³ç›¸ä¼¼ 68% ğŸ’š     â”‚
â”‚                                     â”‚
â”‚ ã€Œæœ€æ„›ç§‘å¹»èˆ‡æ‡¸ç–‘ç‰‡ï¼Œè«¾è˜­ç²‰...ã€    â”‚
â”‚                                     â”‚
â”‚ ğŸ¬ æœ€æ„›é¡å‹ï¼šç§‘å¹» / é©šæ‚š / å‹•ä½œ     â”‚
â”‚ â° è§€å½±ç¿’æ…£ï¼šæ·±å¤œè§€å½±é»¨ ğŸ¦‰          â”‚
â”‚                                     â”‚
â”‚ [æ¥å—] [æŸ¥çœ‹ Profile] [å¿½ç•¥]        â”‚
â”‚ â° 2 å°æ™‚å‰                          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ Bob Chen                         â”‚
â”‚ LV.5 é›»å½±å®—å¸« | ç©åˆ† 3,200          â”‚
â”‚ ...                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### é‚€è«‹å¡ç‰‡è³‡è¨Š
| æ¬„ä½ | èªªæ˜ | è³‡æ–™ä¾†æº |
|------|------|---------|
| é ­åƒ | ä½¿ç”¨è€…é ­åƒ | users.avatar_url |
| åç¨± | é¡¯ç¤ºåç¨± | users.display_name |
| ç­‰ç´š | LV.X + ç¨±è™Ÿ | users.level |
| å“å‘³ç›¸ä¼¼åº¦ | è¨ˆç®— Top 10 é‡ç–Šç‡ | å³æ™‚è¨ˆç®— |
| å€‹äººç°¡ä»‹ | ç°¡çŸ­è‡ªæˆ‘ä»‹ç´¹ | users.bio |
| æœ€æ„›é¡å‹ | æ¨™ç±¤å½¢å¼é¡¯ç¤º | users.favorite_genres |
| è§€å½±ç¿’æ…£ | æ¨™ç±¤å½¢å¼é¡¯ç¤º | users.viewing_habits |
| ç™¼é€æ™‚é–“ | ç›¸å°æ™‚é–“é¡¯ç¤º | friendships.created_at |

#### äº’å‹•è¡Œç‚º
| æŒ‰éˆ• | è¡Œç‚º | API | çµæœ |
|------|------|-----|------|
| **æ¥å—** | æ¥å—å¥½å‹é‚€è«‹ | `POST /api/friends/requests/{id}/accept` | é›™æ–¹æˆç‚ºå¥½å‹ï¼Œç§»è‡³ã€Œæˆ‘çš„å¥½å‹ã€Tab |
| **æŸ¥çœ‹ Profile** | è·³è½‰å®Œæ•´ Profile é  | å°èˆªè‡³ `/profile/{user_id}` | æŸ¥çœ‹å®Œæ•´è³‡è¨Šå¾Œå¯å†æ±ºå®š |
| **å¿½ç•¥** | æ‹’çµ•é‚€è«‹ | `POST /api/friends/requests/{id}/ignore` | é‚€è«‹æ¶ˆå¤±ï¼Œä¸æˆç‚ºå¥½å‹ |

#### ç©ºç‹€æ…‹
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ğŸ¬                        â”‚
â”‚     ç›®å‰æ²’æœ‰å¥½å‹é‚€è«‹                â”‚
â”‚                                     â”‚
â”‚  å»ã€Œæ¨è–¦å¥½å‹ã€æ‰¾æ‰¾å¿—åŒé“åˆçš„å½±è¿·å§ï¼â”‚
â”‚                                     â”‚
â”‚     [å‰å¾€æ¨è–¦å¥½å‹]                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

### Tab 2: æ¨è–¦å¥½å‹

#### UI è¨­è¨ˆ
```
ğŸ“ æ¨è–¦å¥½å‹ï¼ˆå¹³å°éš¨æ©Ÿæ¨è–¦ï¼‰

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ David â”‚ ğŸ‘¤ Emma  â”‚ ğŸ‘¤ Frank â”‚ ğŸ‘¤ Grace â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ LV.3     â”‚ LV.4     â”‚ LV.2     â”‚ LV.5     â”‚
â”‚ è§€å½±é”äºº â”‚ å½±è©•å°ˆå®¶ â”‚ å½±è¿·è¦‹ç¿’ â”‚ é›»å½±å®—å¸« â”‚
â”‚          â”‚          â”‚          â”‚          â”‚
â”‚ å“å‘³ç›¸ä¼¼ â”‚ ç©åˆ†é”äºº â”‚ æ–°æ‰‹å½±è¿· â”‚ å“å‘³ç›¸ä¼¼ â”‚
â”‚ 72% ğŸ’š   â”‚ 800åˆ†    â”‚ 150åˆ†    â”‚ 85% ğŸ”¥   â”‚
â”‚          â”‚          â”‚          â”‚          â”‚
â”‚ [æŸ¥çœ‹]   â”‚ [æŸ¥çœ‹]   â”‚ [æŸ¥çœ‹]   â”‚ [æŸ¥çœ‹]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[è¼‰å…¥æ›´å¤šæ¨è–¦]
```

#### æ¨è–¦å¡ç‰‡è³‡è¨Š
| æ¬„ä½ | èªªæ˜ | é¡¯ç¤ºé‚è¼¯ |
|------|------|---------|
| é ­åƒ | ä½¿ç”¨è€…é ­åƒ | åœ“å½¢è£åˆ‡ |
| åç¨± | é¡¯ç¤ºåç¨± | æœ€å¤šé¡¯ç¤º 8 å­—å…ƒ |
| ç­‰ç´š | LV + ç¨±è™Ÿ | é¡è‰²æ¨™ç¤ºç­‰ç´š |
| ç‰¹è‰²æ¨™ç±¤ | å“å‘³ç›¸ä¼¼åº¦ or ç©åˆ† or æ¨™ç±¤ | å‹•æ…‹é¡¯ç¤ºæœ€çªå‡ºç‰¹å¾µ |

#### æ¨è–¦æ¼”ç®—æ³•ï¼ˆMVP éšæ®µï¼‰

**éšæ®µä¸€ï¼šéš¨æ©Ÿæ¨è–¦**
```sql
SELECT * FROM users 
WHERE id NOT IN (
    -- æ’é™¤å·²æ˜¯å¥½å‹
    SELECT friend_id FROM friendships 
    WHERE user_id = current_user AND status = 'accepted'
    UNION
    -- æ’é™¤å·²ç™¼é€é‚€è«‹
    SELECT friend_id FROM friendships 
    WHERE user_id = current_user AND status = 'pending'
    UNION
    -- æ’é™¤è‡ªå·±
    SELECT current_user
)
ORDER BY RANDOM()
LIMIT 12;
```

**éšæ®µäºŒï¼šæ™ºèƒ½æ¨è–¦ï¼ˆæœªä¾†å„ªåŒ–ï¼‰**
- å“å‘³ç›¸ä¼¼åº¦æ’åºï¼ˆTop 10 é‡ç–Šç‡ï¼‰
- ç›¸åŒæœ€æ„›é¡å‹åŠ åˆ†
- ç­‰ç´šæ¥è¿‘å„ªå…ˆ
- æ´»èºåº¦åŠ æ¬Š

#### é»æ“Šè¡Œç‚º
- **[æŸ¥çœ‹]** â†’ è·³è½‰è‡³è©²ä½¿ç”¨è€…çš„ Profile é 
- **Profile é é¡¯ç¤º [åŠ ç‚ºå¥½å‹] æŒ‰éˆ•**
- **é»æ“Šå¾Œç™¼é€é‚€è«‹** â†’ é¡¯ç¤º Toast æç¤ºã€Œå·²ç™¼é€å¥½å‹é‚€è«‹ã€

---

### Tab 3: æˆ‘çš„å¥½å‹

#### UI è¨­è¨ˆ
```
ğŸ’¬ æˆ‘çš„å¥½å‹ (23 ä½)

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ‘¤ Grace â”‚ ğŸ‘¤ Henry â”‚ ğŸ‘¤ Iris  â”‚ ğŸ‘¤ Jack  â”‚
â”‚ ğŸŸ¢ åœ¨ç·š  â”‚ âšª 2å°æ™‚å‰â”‚ ğŸŸ¢ åœ¨ç·š  â”‚ âšª é›¢ç·š   â”‚
â”‚ â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚
â”‚ LV.4     â”‚ LV.3     â”‚ LV.5     â”‚ LV.2     â”‚
â”‚ å½±è©•å°ˆå®¶ â”‚ è§€å½±é”äºº â”‚ é›»å½±å®—å¸« â”‚ å½±è¿·è¦‹ç¿’ â”‚
â”‚          â”‚          â”‚          â”‚          â”‚
â”‚ [ç§è¨Š]   â”‚ [ç§è¨Š]   â”‚ [ç§è¨Š]   â”‚ [ç§è¨Š]   â”‚
â”‚ [æŸ¥çœ‹]   â”‚ [æŸ¥çœ‹]   â”‚ [æŸ¥çœ‹]   â”‚ [æŸ¥çœ‹]   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[æŸ¥çœ‹å…¨éƒ¨å¥½å‹ (23)]
```

#### å¥½å‹å¡ç‰‡è³‡è¨Š
| æ¬„ä½ | èªªæ˜ | æ›´æ–°é »ç‡ |
|------|------|---------|
| åœ¨ç·šç‹€æ…‹ | ğŸŸ¢ åœ¨ç·š / âšª é›¢ç·š | å³æ™‚ï¼ˆWebSocketï¼‰ |
| æœ€å¾Œä¸Šç·š | X å°æ™‚å‰ / X å¤©å‰ | é›¢ç·šæ™‚é¡¯ç¤º |
| ç­‰ç´š | LV + ç¨±è™Ÿ | éœæ…‹ |

#### äº’å‹•è¡Œç‚º
| æŒ‰éˆ• | è¡Œç‚º | å°èˆªç›®æ¨™ |
|------|------|---------|
| **ç§è¨Š** | é–‹å•Ÿç§è¨Šå°è©± | `/messages/{user_id}` |
| **æŸ¥çœ‹** | æŸ¥çœ‹å¥½å‹ Profile | `/profile/{user_id}` |

#### æ’åºé‚è¼¯
```
1. åœ¨ç·šå„ªå…ˆï¼ˆç¶ é»ï¼‰
2. æœ€è¿‘ä¸Šç·šæ’å‰ï¼ˆé›¢ç·šæ™‚ï¼‰
3. æˆç‚ºå¥½å‹æ™‚é–“ï¼ˆæœ€æ–°çš„åœ¨å‰ï¼‰
```

---

### Tab åˆ‡æ›é‚è¼¯

#### é è¨­é¡¯ç¤ºè¦å‰‡
```typescript
function getDefaultTab() {
  // å„ªå…ˆç´š 1: å¦‚æœæœ‰å¾…è™•ç†é‚€è«‹
  if (pendingRequestsCount > 0) {
    return 'requests';
  }
  // å„ªå…ˆç´š 2: å¦‚æœæœ‰å¥½å‹
  if (totalFriendsCount > 0) {
    return 'friends';
  }
  // å„ªå…ˆç´š 3: æ–°ä½¿ç”¨è€…
  return 'suggested';
}
```

#### Badge é¡¯ç¤º
```typescript
const tabs = [
  {
    id: 'requests',
    label: 'å¥½å‹é‚€è«‹',
    badge: pendingRequestsCount, // ç´…é»æ•¸å­—
    showBadge: pendingRequestsCount > 0
  },
  {
    id: 'suggested',
    label: 'æ¨è–¦å¥½å‹',
    badge: null
  },
  {
    id: 'friends',
    label: 'æˆ‘çš„å¥½å‹',
    badge: totalFriendsCount, // ç°è‰²æ•¸å­—
    showBadge: true
  }
]
```

---

## ğŸ‘¤ Profile æ“´å……

### å€‹äººè³‡è¨Šæ–°å¢æ¬„ä½

#### è³‡æ–™çµæ§‹
```typescript
interface UserProfile {
  // ç¾æœ‰æ¬„ä½
  id: number;
  email: string;
  displayName: string;
  avatarUrl: string;
  
  // æ–°å¢æ¬„ä½
  bio: string;                    // å€‹äººç°¡ä»‹ï¼ˆæœ€å¤š 200 å­—ï¼‰
  favoriteGenres: string[];       // æœ€æ„›é¡å‹ï¼ˆæœ€å¤š 5 å€‹ï¼‰
  viewingHabits: string[];        // è§€å½±ç¿’æ…£ï¼ˆæ¨™ç±¤ï¼‰
  totalPoints: number;            // ç¸½ç©åˆ†
  level: number;                  // ç­‰ç´š (1-5)
  friendsCount: number;           // å¥½å‹æ•¸é‡
  joinedAt: Date;                 // åŠ å…¥æ—¥æœŸ
}
```

#### Profile é é¢ä½ˆå±€

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å›    Profile                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚â”‚ ğŸ‘¤ é ­åƒ     Victorçš„é›»å½±å®‡å®™        â”‚â”‚
â”‚â”‚             ğŸ“Š ç©åˆ†ï¼š2,450            â”‚â”‚
â”‚â”‚             ğŸ† ç­‰ç´šï¼šLV.5 é›»å½±å®—å¸«    â”‚â”‚
â”‚â”‚             ğŸ‘¥ å¥½å‹ï¼š23 ä½            â”‚â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚â”‚ ğŸ“ å€‹äººç°¡ä»‹                          â”‚â”‚
â”‚â”‚ ç†±æ„›ç§‘å¹»èˆ‡æ‡¸ç–‘ç‰‡ï¼Œæœ€å–œæ­¡è«¾è˜­çš„ä½œå“...â”‚â”‚
â”‚â”‚                                       â”‚â”‚
â”‚â”‚ ğŸ¬ æœ€æ„›é¡å‹ï¼šç§‘å¹» / é©šæ‚š / å‹•ä½œ      â”‚â”‚
â”‚â”‚ â° è§€å½±ç¿’æ…£ï¼šæ·±å¤œè§€å½±é»¨ ğŸ¦‰           â”‚â”‚
â”‚â”‚ ğŸ“… åŠ å…¥æ™‚é–“ï¼š2025-06-15              â”‚â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚â”‚ ğŸ”Ÿ Top 10 ç¥ä½œæ¸…å–®                   â”‚â”‚
â”‚â”‚ [å¯æ‹–æ›³æ’åºçš„é›»å½±å¡ç‰‡]               â”‚â”‚
â”‚â”‚ 1. æ˜Ÿéš›æ•ˆæ‡‰                          â”‚â”‚
â”‚â”‚ 2. å…¨é¢å•Ÿå‹•                          â”‚â”‚
â”‚â”‚ 3. é»‘æš—é¨å£«                          â”‚â”‚
â”‚â”‚ ...                                   â”‚â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚â”‚ ğŸ“š å¾…çœ‹æ¸…å–® (12éƒ¨)                   â”‚â”‚
â”‚â”‚ [æ‘ºç–Šå¼åˆ—è¡¨]                         â”‚â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚ [åŠ ç‚ºå¥½å‹] or [å‚³é€è¨Šæ¯]              â”‚â† æ ¹æ“šé—œä¿‚é¡¯ç¤º
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä»–äºº Profile é¡¯ç¤ºé‚è¼¯

#### æŒ‰éˆ•ç‹€æ…‹åˆ¤æ–·
```typescript
function getProfileAction(userId: number) {
  const friendship = getFriendship(currentUser, userId);
  
  if (userId === currentUser.id) {
    return { button: 'ç·¨è¼¯å€‹äººè³‡æ–™', action: 'edit' };
  }
  
  if (friendship?.status === 'accepted') {
    return { button: 'å‚³é€è¨Šæ¯', action: 'message' };
  }
  
  if (friendship?.status === 'pending' && friendship.user_id === currentUser.id) {
    return { button: 'å·²ç™¼é€é‚€è«‹', action: 'disabled', disabled: true };
  }
  
  if (friendship?.status === 'pending' && friendship.friend_id === currentUser.id) {
    return { button: 'å›æ‡‰é‚€è«‹', action: 'respond' };
  }
  
  return { button: 'åŠ ç‚ºå¥½å‹', action: 'add_friend' };
}
```

#### å“å‘³ç›¸ä¼¼åº¦é¡¯ç¤º
```typescript
// åœ¨ä»–äºº Profile é é ‚éƒ¨é¡¯ç¤º
<SimilarityBadge>
  å“å‘³ç›¸ä¼¼åº¦ï¼š72% ğŸ’š
  å…±åŒå–œæ„›ï¼š3 éƒ¨é›»å½±
</SimilarityBadge>
```

---

## ğŸ¤ å¥½å‹ç³»çµ±

### å¥½å‹é—œä¿‚ç‹€æ…‹æ©Ÿ

```
ç‹€æ…‹è½‰æ›åœ–ï¼š

   [ç„¡é—œä¿‚]
      â†“ ç™¼é€é‚€è«‹
   [pending]
      â†“ æ¥å—
   [accepted] â†â†’ [blocked]
      â†“ ç§»é™¤
   [ç„¡é—œä¿‚]
```

### å¥½å‹ç‹€æ…‹å®šç¾©
| ç‹€æ…‹ | èªªæ˜ | user_id | friend_id |
|------|------|---------|-----------|
| `pending` | é‚€è«‹å¾…è™•ç† | ç™¼é€è€… | æ¥æ”¶è€… |
| `accepted` | å·²æ¥å— | ç™¼é€è€… | æ¥æ”¶è€… |
| `rejected` | å·²æ‹’çµ•ï¼ˆè»Ÿåˆªé™¤ï¼‰ | ç™¼é€è€… | æ¥æ”¶è€… |
| `blocked` | å·²å°é– | å°é–è€… | è¢«å°é–è€… |

### æ“ä½œæµç¨‹

#### 1. ç™¼é€å¥½å‹é‚€è«‹
```
ä½¿ç”¨è€…æ“ä½œï¼š
  åœ¨æ¨è–¦å¥½å‹æˆ–ä»–äºº Profile é»æ“Š [åŠ ç‚ºå¥½å‹]
  
å‰ç«¯è¡Œç‚ºï¼š
  1. å‘¼å« API: POST /api/friends/requests
  2. é¡¯ç¤º Toast: "å·²ç™¼é€å¥½å‹é‚€è«‹çµ¦ {Name}"
  3. æŒ‰éˆ•è®Šæ›´ç‚ºã€Œå·²ç™¼é€é‚€è«‹ã€ï¼ˆç°è‰²ä¸å¯é»æ“Šï¼‰
  
å¾Œç«¯è¡Œç‚ºï¼š
  1. æª¢æŸ¥æ˜¯å¦å·²å­˜åœ¨é—œä¿‚
  2. å»ºç«‹ friendships è¨˜éŒ„ (status = 'pending')
  3. ç™¼é€é€šçŸ¥çµ¦æ¥æ”¶è€…
  4. è¿”å›æˆåŠŸç‹€æ…‹
```

#### 2. æ¥å—å¥½å‹é‚€è«‹
```
ä½¿ç”¨è€…æ“ä½œï¼š
  åœ¨ã€Œå¥½å‹é‚€è«‹ã€Tab é»æ“Š [æ¥å—]
  
å‰ç«¯è¡Œç‚ºï¼š
  1. å‘¼å« API: POST /api/friends/requests/{id}/accept
  2. é¡¯ç¤º Toast: "ä½ å’Œ {Name} æˆç‚ºå¥½å‹äº†ï¼"
  3. é‚€è«‹å¡ç‰‡æ¶ˆå¤±
  4. é›™æ–¹é€²å…¥ã€Œæˆ‘çš„å¥½å‹ã€åˆ—è¡¨
  5. è§£é–ç§è¨ŠåŠŸèƒ½
  
å¾Œç«¯è¡Œç‚ºï¼š
  1. æ›´æ–° status = 'accepted'
  2. è¨˜éŒ„ accepted_at æ™‚é–“æˆ³
  3. ç™¼é€é€šçŸ¥çµ¦ç™¼é€è€…
  4. è¿”å›æˆåŠŸç‹€æ…‹
```

#### 3. å¿½ç•¥å¥½å‹é‚€è«‹
```
ä½¿ç”¨è€…æ“ä½œï¼š
  åœ¨ã€Œå¥½å‹é‚€è«‹ã€Tab é»æ“Š [å¿½ç•¥]
  
å‰ç«¯è¡Œç‚ºï¼š
  1. å‘¼å« API: POST /api/friends/requests/{id}/ignore
  2. é‚€è«‹å¡ç‰‡æ¶ˆå¤±ï¼ˆç„¡ Toastï¼Œéœé»˜è™•ç†ï¼‰
  
å¾Œç«¯è¡Œç‚ºï¼š
  1. æ›´æ–° status = 'rejected'
  2. ä¸ç™¼é€ä»»ä½•é€šçŸ¥
  3. è¿”å›æˆåŠŸç‹€æ…‹
```

#### 4. ç§»é™¤å¥½å‹
```
ä½¿ç”¨è€…æ“ä½œï¼š
  åœ¨å¥½å‹ Profile é é»æ“Š [...] â†’ [ç§»é™¤å¥½å‹]
  
å‰ç«¯è¡Œç‚ºï¼š
  1. é¡¯ç¤ºç¢ºèªå°è©±æ¡†: "ç¢ºå®šè¦ç§»é™¤ {Name} å—ï¼Ÿ"
  2. ç¢ºèªå¾Œå‘¼å« API: DELETE /api/friends/{friend_id}
  3. é¡¯ç¤º Toast: "å·²ç§»é™¤å¥½å‹"
  4. è¿”å›äº¤å‹é 
  
å¾Œç«¯è¡Œç‚ºï¼š
  1. åˆªé™¤ friendships è¨˜éŒ„
  2. è¿”å›æˆåŠŸç‹€æ…‹
```

#### 5. å°é–ä½¿ç”¨è€…
```
ä½¿ç”¨è€…æ“ä½œï¼š
  åœ¨å¥½å‹ Profile é é»æ“Š [...] â†’ [å°é–ä½¿ç”¨è€…]
  
å‰ç«¯è¡Œç‚ºï¼š
  1. é¡¯ç¤ºç¢ºèªå°è©±æ¡†
  2. å‘¼å« API: POST /api/friends/{user_id}/block
  3. é¡¯ç¤º Toast: "å·²å°é– {Name}"
  
å¾Œç«¯è¡Œç‚ºï¼š
  1. æ›´æ–° status = 'blocked'
  2. é›™æ–¹ç„¡æ³•äº’ç›¸æœå°‹
  3. ç„¡æ³•ç™¼é€é‚€è«‹
  4. ç„¡æ³•æŸ¥çœ‹å½¼æ­¤ Profile
```

---

## ğŸ’¬ ç§è¨ŠåŠŸèƒ½

### è¨Šæ¯ç³»çµ±æ¶æ§‹

```
ç§è¨Šå…¥å£ï¼š
1. äº¤å‹é  â†’ æˆ‘çš„å¥½å‹ â†’ [ç§è¨Š] æŒ‰éˆ•
2. å¥½å‹ Profile é  â†’ [å‚³é€è¨Šæ¯] æŒ‰éˆ•
3. NavBar é€šçŸ¥ â†’ é»æ“Šè¨Šæ¯é€šçŸ¥

ç§è¨Šä»‹é¢ï¼š
â”œâ”€â”€ å°è©±åˆ—è¡¨é ï¼ˆ/messagesï¼‰
â”‚   â””â”€â”€ é¡¯ç¤ºæ‰€æœ‰å°è©±ï¼ŒæŒ‰æœ€æ–°è¨Šæ¯æ’åº
â””â”€â”€ å–®ä¸€å°è©±é ï¼ˆ/messages/{user_id}ï¼‰
    â””â”€â”€ èˆ‡ç‰¹å®šå¥½å‹çš„èŠå¤©å®¤
```

### å°è©±åˆ—è¡¨é 

#### UI è¨­è¨ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å›    ğŸ’¬ è¨Šæ¯                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚â”‚ ğŸ‘¤ Alice Lin              ğŸŸ¢ åœ¨ç·š    â”‚â”‚
â”‚â”‚ ä½ ä¹Ÿå–œæ­¡è«¾è˜­ï¼ã€Šå…¨é¢å•Ÿ...            â”‚â”‚
â”‚â”‚ 14:23  [2] â† æœªè®€æ•¸é‡                â”‚â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚â”‚ ğŸ‘¤ Bob Chen               âšª 2å°æ™‚å‰ â”‚â”‚
â”‚â”‚ æˆ‘å‰›çœ‹å®Œã€Šæ˜Ÿéš›æ•ˆæ‡‰ã€‹...              â”‚â”‚
â”‚â”‚ æ˜¨å¤©                                  â”‚â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â”‚                                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚
â”‚â”‚ ğŸ‘¤ Carol Wang             âšª 1å¤©å‰   â”‚â”‚
â”‚â”‚ å¥½çš„ï¼Œé‚£éƒ¨æˆ‘ä¹Ÿæƒ³çœ‹                   â”‚â”‚
â”‚â”‚ 2å¤©å‰                                 â”‚â”‚
â”‚â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### å°è©±å¡ç‰‡è³‡è¨Š
| æ¬„ä½ | èªªæ˜ | è³‡æ–™ä¾†æº |
|------|------|---------|
| é ­åƒ + åç¨± | å°æ–¹ä½¿ç”¨è€…è³‡è¨Š | users |
| åœ¨ç·šç‹€æ…‹ | å³æ™‚ç‹€æ…‹ | WebSocket |
| æœ€æ–°è¨Šæ¯é è¦½ | æœ€å¤šé¡¯ç¤º 20 å­— | messages.content |
| æ™‚é–“æˆ³ | ç›¸å°æ™‚é–“ | messages.created_at |
| æœªè®€æ•¸é‡ | ç´…é» Badge | COUNT(is_read = false) |

#### æ’åºé‚è¼¯
```sql
ORDER BY 
  messages.created_at DESC  -- æœ€æ–°è¨Šæ¯åœ¨æœ€ä¸Šæ–¹
```

---

### å–®ä¸€å°è©±é 

#### UI è¨­è¨ˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ â† è¿”å›  ğŸ‘¤ Alice Lin  ğŸŸ¢ åœ¨ç·š          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                         â”‚
â”‚              Aliceï¼š                    â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚     â”‚ ä½ ä¹Ÿå–œæ­¡è«¾è˜­ï¼       â”‚ 14:23     â”‚
â”‚     â”‚ ã€Šå…¨é¢å•Ÿå‹•ã€‹çœŸçš„ç¥ä½œ â”‚           â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                         â”‚
â”‚  Victorï¼ˆæˆ‘ï¼‰ï¼š                         â”‚
â”‚           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  14:25    â”‚ å°å•Šï¼ä½ çœ‹é         â”‚     â”‚
â”‚           â”‚ ã€Šæ˜Ÿéš›æ•ˆæ‡‰ã€‹å—ï¼Ÿ     â”‚     â”‚
â”‚           â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚                                         â”‚
â”‚              Aliceï¼š                    â”‚
â”‚     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚     â”‚ ç•¶ç„¶ï¼æˆ‘çš„ Top 1 å°±æ˜¯â”‚ 14:26     â”‚
â”‚     â”‚ å®ƒï¼Œè¶…æ„Ÿäººçš„ ğŸ¥º      â”‚ âœ“âœ“       â”‚
â”‚     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â”‚                                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [è¼¸å…¥è¨Šæ¯...]              [ğŸ“] [ç™¼é€] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### è¨Šæ¯æ°£æ³¡è¨­è¨ˆ
```typescript
interface MessageBubble {
  // è‡ªå·±çš„è¨Šæ¯ï¼šå³å´ï¼Œè—è‰²èƒŒæ™¯
  isSender: true  â†’ align: right, bg: blue
  
  // å°æ–¹çš„è¨Šæ¯ï¼šå·¦å´ï¼Œç°è‰²èƒŒæ™¯
  isSender: false â†’ align: left, bg: gray
  
  // é¡¯ç¤ºè³‡è¨Š
  content: string        // è¨Šæ¯å…§å®¹
  timestamp: Date        // æ™‚é–“æˆ³ï¼ˆ14:23ï¼‰
  isRead: boolean        // å·²è®€ç‹€æ…‹ï¼ˆâœ“âœ“ é›™å‹¾ï¼‰
}
```

#### å·²è®€ç‹€æ…‹
| ç‹€æ…‹ | åœ–ç¤º | èªªæ˜ |
|------|------|------|
| ç™¼é€ä¸­ | â³ | ç°è‰²å–®å‹¾ |
| å·²é€é” | âœ“ | ç°è‰²å–®å‹¾ |
| å·²è®€ | âœ“âœ“ | è—è‰²é›™å‹¾ |

#### è¼¸å…¥æ¡†åŠŸèƒ½
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [è¼¸å…¥è¨Šæ¯...]          [ğŸ“] [ç™¼é€] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

åŠŸèƒ½ï¼š
â€¢ å¤šè¡Œè¼¸å…¥ï¼ˆEnter æ›è¡Œï¼ŒCmd/Ctrl+Enter ç™¼é€ï¼‰
â€¢ å­—æ•¸é™åˆ¶ï¼š500 å­—
â€¢ [ğŸ“] æœªä¾†æ“´å……ï¼šé™„ä»¶åŠŸèƒ½
â€¢ [ç™¼é€] é»æ“Šæˆ–å¿«æ·éµç™¼é€
```

---

### å³æ™‚è¨Šæ¯æ–¹æ¡ˆ

#### æ–¹æ¡ˆé¸æ“‡
| æ–¹æ¡ˆ | å„ªé» | ç¼ºé» | å»ºè­° |
|------|------|------|------|
| **è¼ªè©¢ï¼ˆPollingï¼‰** | ç°¡å–®æ˜“å¯¦ä½œ | è³‡æºæ¶ˆè€—é«˜ | âœ… MVP éšæ®µ |
| **WebSocket** | çœŸæ­£å³æ™‚ | å¯¦ä½œè¤‡é›œ | â³ æœªä¾†å„ªåŒ– |
| **ç¬¬ä¸‰æ–¹æœå‹™** | åŠŸèƒ½å®Œæ•´ | æˆæœ¬è¼ƒé«˜ | ğŸ”„ å¯è€ƒæ…® |

#### MVP éšæ®µï¼šè¼ªè©¢æ–¹æ¡ˆ
```typescript
// æ¯ 3 ç§’è¼ªè©¢ä¸€æ¬¡æ–°è¨Šæ¯
useEffect(() => {
  const interval = setInterval(() => {
    fetchNewMessages(conversationId);
  }, 3000);
  
  return () => clearInterval(interval);
}, [conversationId]);

// ç™¼é€è¨Šæ¯å¾Œç«‹å³è¼ªè©¢
const sendMessage = async (content) => {
  await api.post('/messages', { content, receiver_id });
  fetchNewMessages(conversationId); // ç«‹å³æ›´æ–°
};
```

---

### é€šçŸ¥ç³»çµ±

#### é€šçŸ¥è§¸ç™¼é»
| äº‹ä»¶ | é€šçŸ¥å…§å®¹ | è·³è½‰ç›®æ¨™ |
|------|---------|---------|
| æ”¶åˆ°å¥½å‹é‚€è«‹ | "{Name} æƒ³åŠ ä½ ç‚ºå¥½å‹" | äº¤å‹é  - å¥½å‹é‚€è«‹ Tab |
| é‚€è«‹è¢«æ¥å— | "{Name} æ¥å—äº†ä½ çš„å¥½å‹é‚€è«‹" | äº¤å‹é  - æˆ‘çš„å¥½å‹ Tab |
| æ”¶åˆ°æ–°è¨Šæ¯ | "{Name}: {è¨Šæ¯é è¦½}" | ç§è¨Šå°è©±é  |

#### NavBar é€šçŸ¥åœ–ç¤º
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ğŸ”” é€šçŸ¥ (5)      â”‚ â† ç´…é» Badge
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ğŸ’¬ Alice: ä½ ä¹Ÿ... â”‚  2åˆ†é˜å‰
â”‚ ğŸ‘¥ Bob æ¥å—äº†...  â”‚  1å°æ™‚å‰
â”‚ ğŸ”” Carol æƒ³åŠ ...  â”‚  2å°æ™‚å‰
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [æŸ¥çœ‹å…¨éƒ¨]       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—„ï¸ è³‡æ–™åº«è¨­è¨ˆ

### 1. friendshipsï¼ˆå¥½å‹é—œä¿‚è¡¨ï¼‰
```sql
CREATE TABLE friendships (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    friend_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    status VARCHAR(20) NOT NULL DEFAULT 'pending',
    -- 'pending': é‚€è«‹ä¸­
    -- 'accepted': å·²æ¥å—
    -- 'rejected': å·²æ‹’çµ•
    -- 'blocked': å·²å°é–
    created_at TIMESTAMP DEFAULT NOW(),
    accepted_at TIMESTAMP,
    updated_at TIMESTAMP DEFAULT NOW(),
    CONSTRAINT unique_friendship UNIQUE(user_id, friend_id),
    CONSTRAINT no_self_friend CHECK(user_id != friend_id)
);

-- ç´¢å¼•
CREATE INDEX idx_friendships_user_id ON friendships(user_id);
CREATE INDEX idx_friendships_friend_id ON friendships(friend_id);
CREATE INDEX idx_friendships_status ON friendships(status);
CREATE INDEX idx_friendships_both_users ON friendships(user_id, friend_id);
```

### 2. messagesï¼ˆè¨Šæ¯è¡¨ï¼‰
```sql
CREATE TABLE messages (
    id SERIAL PRIMARY KEY,
    sender_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    receiver_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    content TEXT NOT NULL,
    is_read BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW(),
    read_at TIMESTAMP,
    CONSTRAINT message_length CHECK(char_length(content) <= 500)
);

-- ç´¢å¼•
CREATE INDEX idx_messages_sender ON messages(sender_id);
CREATE INDEX idx_messages_receiver ON messages(receiver_id);
CREATE INDEX idx_messages_conversation ON messages(sender_id, receiver_id, created_at DESC);
CREATE INDEX idx_messages_unread ON messages(receiver_id, is_read) WHERE is_read = FALSE;
```

### 3. æ“´å…… users è¡¨
```sql
ALTER TABLE users ADD COLUMN bio TEXT;
ALTER TABLE users ADD COLUMN favorite_genres JSONB DEFAULT '[]'::jsonb;
ALTER TABLE users ADD COLUMN viewing_habits JSONB DEFAULT '[]'::jsonb;
ALTER TABLE users ADD COLUMN total_points INTEGER DEFAULT 0;
ALTER TABLE users ADD COLUMN level INTEGER DEFAULT 1;
ALTER TABLE users ADD COLUMN joined_at TIMESTAMP DEFAULT NOW();

-- ç´¢å¼•
CREATE INDEX idx_users_level ON users(level);
CREATE INDEX idx_users_total_points ON users(total_points DESC);
```

### 4. notificationsï¼ˆé€šçŸ¥è¡¨ï¼‰
```sql
CREATE TABLE notifications (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    type VARCHAR(50) NOT NULL,
    -- 'friend_request': å¥½å‹é‚€è«‹
    -- 'friend_accepted': é‚€è«‹è¢«æ¥å—
    -- 'new_message': æ–°è¨Šæ¯
    title TEXT NOT NULL,
    content TEXT,
    link TEXT,
    is_read BOOLEAN DEFAULT FALSE,
    created_at TIMESTAMP DEFAULT NOW()
);

-- ç´¢å¼•
CREATE INDEX idx_notifications_user_id ON notifications(user_id);
CREATE INDEX idx_notifications_unread ON notifications(user_id, is_read) WHERE is_read = FALSE;
CREATE INDEX idx_notifications_created_at ON notifications(created_at DESC);
```

---

## ğŸ“¡ API è¦æ ¼

### å¥½å‹ç³»çµ± API

#### 1. å–å¾—æ¨è–¦å¥½å‹
```
GET /api/friends/suggested?limit=12

Response:
{
  "users": [
    {
      "id": 123,
      "display_name": "Alice Lin",
      "avatar_url": "https://...",
      "level": 3,
      "total_points": 450,
      "bio": "æœ€æ„›ç§‘å¹»èˆ‡æ‡¸ç–‘ç‰‡...",
      "favorite_genres": ["ç§‘å¹»", "é©šæ‚š", "å‹•ä½œ"],
      "viewing_habits": ["æ·±å¤œè§€å½±é»¨"],
      "similarity_score": 72  // å“å‘³ç›¸ä¼¼åº¦
    }
  ],
  "total": 156
}
```

#### 2. ç™¼é€å¥½å‹é‚€è«‹
```
POST /api/friends/requests

Body:
{
  "friend_id": 123
}

Response:
{
  "id": 456,
  "status": "pending",
  "created_at": "2025-11-12T10:30:00Z"
}
```

#### 3. å–å¾—æ”¶åˆ°çš„å¥½å‹é‚€è«‹
```
GET /api/friends/requests/received

Response:
{
  "requests": [
    {
      "id": 789,
      "user": {
        "id": 123,
        "display_name": "Alice Lin",
        "avatar_url": "https://...",
        "level": 3,
        "bio": "...",
        "favorite_genres": [...],
        "viewing_habits": [...],
        "similarity_score": 68
      },
      "created_at": "2025-11-12T08:00:00Z"
    }
  ],
  "count": 3
}
```

#### 4. æ¥å—å¥½å‹é‚€è«‹
```
POST /api/friends/requests/{request_id}/accept

Response:
{
  "status": "accepted",
  "accepted_at": "2025-11-12T10:35:00Z",
  "friendship_id": 456
}
```

#### 5. å¿½ç•¥å¥½å‹é‚€è«‹
```
POST /api/friends/requests/{request_id}/ignore

Response:
{
  "status": "rejected"
}
```

#### 6. å–å¾—å¥½å‹åˆ—è¡¨
```
GET /api/friends

Response:
{
  "friends": [
    {
      "id": 123,
      "display_name": "Alice Lin",
      "avatar_url": "https://...",
      "level": 3,
      "is_online": true,
      "last_seen": "2025-11-12T10:30:00Z",
      "unread_messages": 2
    }
  ],
  "total": 23
}
```

#### 7. ç§»é™¤å¥½å‹
```
DELETE /api/friends/{friend_id}

Response:
{
  "status": "success"
}
```

#### 8. å°é–ä½¿ç”¨è€…
```
POST /api/friends/{user_id}/block

Response:
{
  "status": "blocked"
}
```

---

### ç§è¨Šç³»çµ± API

#### 1. å–å¾—å°è©±åˆ—è¡¨
```
GET /api/messages/conversations

Response:
{
  "conversations": [
    {
      "user": {
        "id": 123,
        "display_name": "Alice Lin",
        "avatar_url": "https://...",
        "is_online": true
      },
      "last_message": {
        "content": "ä½ ä¹Ÿå–œæ­¡è«¾è˜­ï¼...",
        "created_at": "2025-11-12T14:23:00Z",
        "is_read": false
      },
      "unread_count": 2
    }
  ]
}
```

#### 2. å–å¾—å–®ä¸€å°è©±è¨Šæ¯
```
GET /api/messages/conversations/{user_id}?limit=50&before={message_id}

Response:
{
  "messages": [
    {
      "id": 456,
      "sender_id": 123,
      "receiver_id": 789,
      "content": "ä½ ä¹Ÿå–œæ­¡è«¾è˜­ï¼",
      "is_read": true,
      "created_at": "2025-11-12T14:23:00Z",
      "read_at": "2025-11-12T14:24:00Z"
    }
  ],
  "has_more": true
}
```

#### 3. ç™¼é€è¨Šæ¯
```
POST /api/messages

Body:
{
  "receiver_id": 123,
  "content": "å°å•Šï¼ä½ çœ‹éã€Šæ˜Ÿéš›æ•ˆæ‡‰ã€‹å—ï¼Ÿ"
}

Response:
{
  "id": 457,
  "sender_id": 789,
  "receiver_id": 123,
  "content": "å°å•Šï¼ä½ çœ‹éã€Šæ˜Ÿéš›æ•ˆæ‡‰ã€‹å—ï¼Ÿ",
  "is_read": false,
  "created_at": "2025-11-12T14:25:00Z"
}
```

#### 4. æ¨™è¨˜è¨Šæ¯ç‚ºå·²è®€
```
PUT /api/messages/conversations/{user_id}/read

Response:
{
  "updated_count": 5
}
```

---

### é€šçŸ¥ç³»çµ± API

#### 1. å–å¾—é€šçŸ¥åˆ—è¡¨
```
GET /api/notifications?limit=20&unread_only=true

Response:
{
  "notifications": [
    {
      "id": 123,
      "type": "friend_request",
      "title": "Bob æƒ³åŠ ä½ ç‚ºå¥½å‹",
      "content": null,
      "link": "/friends?tab=requests",
      "is_read": false,
      "created_at": "2025-11-12T10:00:00Z"
    },
    {
      "id": 124,
      "type": "new_message",
      "title": "Alice å‚³è¨Šæ¯çµ¦ä½ ",
      "content": "ä½ ä¹Ÿå–œæ­¡è«¾è˜­ï¼",
      "link": "/messages/123",
      "is_read": false,
      "created_at": "2025-11-12T14:23:00Z"
    }
  ],
  "unread_count": 5
}
```

#### 2. æ¨™è¨˜é€šçŸ¥ç‚ºå·²è®€
```
PUT /api/notifications/{notification_id}/read

Response:
{
  "is_read": true
}
```

#### 3. æ¨™è¨˜æ‰€æœ‰é€šçŸ¥ç‚ºå·²è®€
```
PUT /api/notifications/read-all

Response:
{
  "updated_count": 5
}
```

---

## ğŸ¨ å‰ç«¯çµ„ä»¶

### çµ„ä»¶çµæ§‹
```
frontend/
â”œâ”€â”€ app/
â”‚   â”œâ”€â”€ friends/
â”‚   â”‚   â””â”€â”€ page.tsx              # äº¤å‹é ï¼ˆä¸‰ Tabï¼‰
â”‚   â”œâ”€â”€ messages/
â”‚   â”‚   â”œâ”€â”€ page.tsx              # å°è©±åˆ—è¡¨é 
â”‚   â”‚   â””â”€â”€ [userId]/
â”‚   â”‚       â””â”€â”€ page.tsx          # å–®ä¸€å°è©±é 
â”‚   â””â”€â”€ profile/
â”‚       â””â”€â”€ [userId]/
â”‚           â””â”€â”€ page.tsx          # ä»–äºº Profile é 
â”‚
â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ NavBar.tsx                # å°èˆªåˆ—ï¼ˆå«é€šçŸ¥ï¼‰
â”‚   â”œâ”€â”€ friends/
â”‚   â”‚   â”œâ”€â”€ FriendRequestCard.tsx    # å¥½å‹é‚€è«‹å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ SuggestedFriendCard.tsx  # æ¨è–¦å¥½å‹å¡ç‰‡
â”‚   â”‚   â”œâ”€â”€ FriendCard.tsx           # æˆ‘çš„å¥½å‹å¡ç‰‡
â”‚   â”‚   â””â”€â”€ FriendsTabs.tsx          # Tab åˆ‡æ›çµ„ä»¶
â”‚   â”œâ”€â”€ messages/
â”‚   â”‚   â”œâ”€â”€ ConversationList.tsx     # å°è©±åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ ConversationItem.tsx     # å–®ä¸€å°è©±é …ç›®
â”‚   â”‚   â”œâ”€â”€ ChatRoom.tsx             # èŠå¤©å®¤
â”‚   â”‚   â”œâ”€â”€ MessageBubble.tsx        # è¨Šæ¯æ°£æ³¡
â”‚   â”‚   â””â”€â”€ MessageInput.tsx         # è¨Šæ¯è¼¸å…¥æ¡†
â”‚   â”œâ”€â”€ profile/
â”‚   â”‚   â”œâ”€â”€ ProfileHeader.tsx        # Profile é ­éƒ¨
â”‚   â”‚   â”œâ”€â”€ ProfileInfo.tsx          # å€‹äººè³‡è¨Šå€
â”‚   â”‚   â””â”€â”€ SimilarityBadge.tsx      # å“å‘³ç›¸ä¼¼åº¦å¾½ç« 
â”‚   â””â”€â”€ notifications/
â”‚       â”œâ”€â”€ NotificationDropdown.tsx # é€šçŸ¥ä¸‹æ‹‰é¸å–®
â”‚       â””â”€â”€ NotificationItem.tsx     # å–®ä¸€é€šçŸ¥é …ç›®
â”‚
â””â”€â”€ lib/
    â”œâ”€â”€ api/
    â”‚   â”œâ”€â”€ friends.ts            # å¥½å‹ API
    â”‚   â”œâ”€â”€ messages.ts           # è¨Šæ¯ API
    â”‚   â””â”€â”€ notifications.ts      # é€šçŸ¥ API
    â””â”€â”€ hooks/
        â”œâ”€â”€ useFriends.ts         # å¥½å‹ç›¸é—œ Hook
        â”œâ”€â”€ useMessages.ts        # è¨Šæ¯ç›¸é—œ Hook
        â””â”€â”€ useNotifications.ts   # é€šçŸ¥ç›¸é—œ Hook
```

### æ ¸å¿ƒ Hooks

#### useFriends.ts
```typescript
export function useFriends() {
  const { data: friends, isLoading } = useQuery({
    queryKey: ['friends'],
    queryFn: Api.friends.list
  });
  
  const { data: requests } = useQuery({
    queryKey: ['friend-requests'],
    queryFn: Api.friends.getRequests
  });
  
  const acceptRequest = useMutation({
    mutationFn: Api.friends.acceptRequest,
    onSuccess: () => {
      queryClient.invalidateQueries(['friends']);
      queryClient.invalidateQueries(['friend-requests']);
    }
  });
  
  return {
    friends: friends?.friends || [],
    requests: requests?.requests || [],
    acceptRequest: acceptRequest.mutate,
    isLoading
  };
}
```

#### useMessages.ts
```typescript
export function useMessages(userId?: number) {
  const { data: conversations } = useQuery({
    queryKey: ['conversations'],
    queryFn: Api.messages.getConversations
  });
  
  const { data: messages } = useQuery({
    queryKey: ['messages', userId],
    queryFn: () => Api.messages.getMessages(userId!),
    enabled: !!userId,
    refetchInterval: 3000  // æ¯ 3 ç§’è¼ªè©¢
  });
  
  const sendMessage = useMutation({
    mutationFn: Api.messages.send,
    onSuccess: () => {
      queryClient.invalidateQueries(['messages', userId]);
      queryClient.invalidateQueries(['conversations']);
    }
  });
  
  return {
    conversations: conversations?.conversations || [],
    messages: messages?.messages || [],
    sendMessage: sendMessage.mutate
  };
}
```

---

## ğŸ“… é–‹ç™¼æ™‚ç¨‹

### Week 1-2: å¥½å‹ç³»çµ± + äº¤å‹é 
- [ ] **Day 1-2: è³‡æ–™åº«è¨­è¨ˆ**
  - [ ] å»ºç«‹ friendships è¡¨
  - [ ] æ“´å…… users è¡¨æ¬„ä½
  - [ ] å»ºç«‹ç´¢å¼•
  
- [ ] **Day 3-5: å¥½å‹ API**
  - [ ] æ¨è–¦å¥½å‹ API
  - [ ] ç™¼é€é‚€è«‹ API
  - [ ] æ¥å—/å¿½ç•¥é‚€è«‹ API
  - [ ] å¥½å‹åˆ—è¡¨ API
  - [ ] ç§»é™¤å¥½å‹ API
  
- [ ] **Day 6-10: äº¤å‹é  UI**
  - [ ] ä¸‰ Tab æ¶æ§‹
  - [ ] å¥½å‹é‚€è«‹ Tab + å¡ç‰‡çµ„ä»¶
  - [ ] æ¨è–¦å¥½å‹ Tab + å¡ç‰‡çµ„ä»¶
  - [ ] æˆ‘çš„å¥½å‹ Tab + å¡ç‰‡çµ„ä»¶
  - [ ] æœå°‹ä½¿ç”¨è€…åŠŸèƒ½
  - [ ] å“å‘³ç›¸ä¼¼åº¦è¨ˆç®—

### Week 3: Profile æ“´å……
- [ ] **Day 1-2: Profile ç·¨è¼¯**
  - [ ] ç·¨è¼¯å€‹äººç°¡ä»‹ API
  - [ ] ç·¨è¼¯æœ€æ„›é¡å‹ API
  - [ ] ç·¨è¼¯è§€å½±ç¿’æ…£ API
  - [ ] Profile ç·¨è¼¯è¡¨å–® UI
  
- [ ] **Day 3-5: Profile å±•ç¤º**
  - [ ] Profile é é¢æ”¹ç‰ˆ
  - [ ] ä»–äºº Profile æŸ¥çœ‹é 
  - [ ] åŠ ç‚ºå¥½å‹æŒ‰éˆ•é‚è¼¯
  - [ ] å“å‘³ç›¸ä¼¼åº¦é¡¯ç¤º

### Week 4-5: ç§è¨ŠåŠŸèƒ½
- [ ] **Day 1-3: è¨Šæ¯ API**
  - [ ] messages è¡¨å»ºç«‹
  - [ ] ç™¼é€è¨Šæ¯ API
  - [ ] å–å¾—å°è©±åˆ—è¡¨ API
  - [ ] å–å¾—å–®ä¸€å°è©± API
  - [ ] æ¨™è¨˜å·²è®€ API
  
- [ ] **Day 4-7: ç§è¨Š UI**
  - [ ] å°è©±åˆ—è¡¨é 
  - [ ] å–®ä¸€å°è©±é ï¼ˆèŠå¤©å®¤ï¼‰
  - [ ] è¨Šæ¯æ°£æ³¡çµ„ä»¶
  - [ ] è¨Šæ¯è¼¸å…¥æ¡†
  - [ ] è¼ªè©¢æ©Ÿåˆ¶å¯¦ä½œ
  
- [ ] **Day 8-10: é€šçŸ¥ç³»çµ±**
  - [ ] notifications è¡¨å»ºç«‹
  - [ ] é€šçŸ¥ API
  - [ ] NavBar é€šçŸ¥åœ–ç¤º
  - [ ] é€šçŸ¥ä¸‹æ‹‰é¸å–®
  - [ ] é€šçŸ¥è·³è½‰é‚è¼¯

### æ¸¬è©¦èˆ‡å„ªåŒ–
- [ ] **æ•´åˆæ¸¬è©¦**
  - [ ] å¥½å‹é‚€è«‹å®Œæ•´æµç¨‹
  - [ ] ç§è¨Šç™¼é€èˆ‡æ¥æ”¶
  - [ ] é€šçŸ¥è§¸ç™¼èˆ‡é¡¯ç¤º
  
- [ ] **æ•ˆèƒ½å„ªåŒ–**
  - [ ] API å›æ‡‰æ™‚é–“å„ªåŒ–
  - [ ] è³‡æ–™åº«æŸ¥è©¢å„ªåŒ–
  - [ ] å‰ç«¯ç‹€æ…‹ç®¡ç†å„ªåŒ–

---

## ğŸ“ é–‹ç™¼æ³¨æ„äº‹é …

### è³‡æ–™ä¸€è‡´æ€§
- ç™¼é€å¥½å‹é‚€è«‹å‰æª¢æŸ¥æ˜¯å¦å·²å­˜åœ¨é—œä¿‚
- æ¥å—é‚€è«‹å¾Œç«‹å³æ›´æ–°é›™æ–¹å¥½å‹åˆ—è¡¨
- åˆªé™¤å¥½å‹æ™‚åŒæ™‚æ¸…ç†ç›¸é—œè¨Šæ¯ï¼ˆå¯é¸ï¼‰

### æ•ˆèƒ½å„ªåŒ–
- æ¨è–¦å¥½å‹ä½¿ç”¨å¿«å–ï¼ˆ5 åˆ†é˜ï¼‰
- è¨Šæ¯åˆ—è¡¨åˆ†é è¼‰å…¥ï¼ˆæ¯æ¬¡ 50 å‰‡ï¼‰
- å“å‘³ç›¸ä¼¼åº¦è¨ˆç®—çµæœå¿«å–

### å®‰å…¨æ€§
- é©—è­‰å¥½å‹é—œä¿‚æ‰èƒ½ç™¼é€ç§è¨Š
- å°é–ä½¿ç”¨è€…å¾Œå®Œå…¨éš”é›¢
- è¨Šæ¯å…§å®¹é•·åº¦é™åˆ¶ï¼ˆ500 å­—ï¼‰
- XSS é˜²è­·ï¼ˆè¨Šæ¯å…§å®¹éæ¿¾ï¼‰

### ä½¿ç”¨è€…é«”é©—
- æ‰€æœ‰æ“ä½œæä¾›å³æ™‚å›é¥‹ï¼ˆToastï¼‰
- Loading ç‹€æ…‹æ˜ç¢ºé¡¯ç¤º
- éŒ¯èª¤è¨Šæ¯å‹å–„æç¤º
- ç©ºç‹€æ…‹è¨­è¨ˆï¼ˆç„¡é‚€è«‹ã€ç„¡å¥½å‹ç­‰ï¼‰

---

**æ–‡æª”çµæŸ**

å¦‚æœ‰ç–‘å•è«‹åƒè€ƒï¼š
- éŠæˆ²åŒ–åŠŸèƒ½è¦æ ¼ï¼š`docs/spec-gaming-features.md`
- æ•´é«”è¦åŠƒæ–‡æª”ï¼š`docs/social-gaming-expansion-plan.md`